"use strict";(()=>{var Oe=Object.create;var O=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Ge=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty;var je=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ye=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var We=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ge(e))!Ke.call(n,o)&&o!==t&&O(n,o,{get:()=>e[o],enumerable:!(r=Be(e,o))||r.enumerable});return n};var Xe=(n,e,t)=>(t=n!=null?Oe(Qe(n)):{},We(e||!n||!n.__esModule?O(t,"default",{value:n,enumerable:!0}):t,n));var g=(n,e,t)=>je(n,typeof e!="symbol"?e+"":e,t);var ye=Ye((Lt,R)=>{"use strict";(function(n){let e=0,t=function(r,o){let i="js-enabled",l=this,d=!1;if(Array.isArray(r))return!!r.length&&r.map(s=>new t(s,o));let a={init(){this.options=Object.assign({duration:500,ariaEnabled:!0,collapse:!0,showMultiple:!1,onlyChildNodes:!0,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",beforeOpen:()=>{},onOpen:()=>{},beforeClose:()=>{},onClose:()=>{}},o);let s=typeof r=="string";this.container=s?document.querySelector(r):r,this.createDefinitions(),l.attachEvents()},createDefinitions(){let{elementClass:s,openOnInit:u,onlyChildNodes:m}=this.options,p=m?this.container.childNodes:this.container.querySelectorAll(c(s));this.elements=Array.from(p).filter(h=>h.classList&&h.classList.contains(s)),this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.elements.filter(h=>!h.classList.contains(i)).forEach(h=>{h.classList.add(i),this.generateIDs(h),this.setARIA(h),this.setTransition(h);let f=this.elements.indexOf(h);e++,u.includes(f)?this.showElement(h,!1):this.closeElement(h,!1)})},setTransition(s){let u=arguments.length>1&&arguments[1]!==void 0&&arguments[1],{duration:m,panelClass:p}=this.options;s.querySelector(c(p)).style.transitionDuration=u?null:"".concat(m,"ms")},generateIDs(s){let{triggerClass:u,panelClass:m}=this.options,p=s.querySelector(c(u)),h=s.querySelector(c(m));s.setAttribute("id",s.id||"ac-".concat(e)),p.setAttribute("id",p.id||"ac-trigger-".concat(e)),h.setAttribute("id",h.id||"ac-panel-".concat(e))},removeIDs(s){let{triggerClass:u,panelClass:m}=this.options,p=s.querySelector(c(u)),h=s.querySelector(c(m));s.id.startsWith("ac-")&&s.removeAttribute("id"),p.id.startsWith("ac-")&&p.removeAttribute("id"),h.id.startsWith("ac-")&&h.removeAttribute("id")},setARIA(s){let{ariaEnabled:u,triggerClass:m,panelClass:p}=this.options;if(!u)return;let h=s.querySelector(c(m)),f=s.querySelector(c(p));h.setAttribute("role","button"),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-disabled",!1),h.setAttribute("aria-expanded",!1),f.setAttribute("role","region"),f.setAttribute("aria-labelledby",h.id)},updateARIA(s,u){let{ariaExpanded:m,ariaDisabled:p}=u,{ariaEnabled:h,triggerClass:f}=this.options;if(!h)return;let y=s.querySelector(c(f));y.setAttribute("aria-expanded",m),y.setAttribute("aria-disabled",p)},removeARIA(s){let{ariaEnabled:u,triggerClass:m,panelClass:p}=this.options;if(!u)return;let h=s.querySelector(c(m)),f=s.querySelector(c(p));h.removeAttribute("role"),h.removeAttribute("aria-controls"),h.removeAttribute("aria-disabled"),h.removeAttribute("aria-expanded"),f.removeAttribute("role"),f.removeAttribute("aria-labelledby")},focus(s,u){s.preventDefault();let{triggerClass:m}=this.options;u.querySelector(c(m)).focus()},focusFirstElement(s){this.focus(s,this.firstElement),this.currFocusedIdx=0},focusLastElement(s){this.focus(s,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement(s){let u=this.currFocusedIdx+1;if(u>this.elements.length-1)return this.focusFirstElement(s);this.focus(s,this.elements[u]),this.currFocusedIdx=u},focusPrevElement(s){let u=this.currFocusedIdx-1;if(u<0)return this.focusLastElement(s);this.focus(s,this.elements[u]),this.currFocusedIdx=u},showElement(s){let u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],{panelClass:m,activeClass:p,collapse:h,beforeOpen:f}=this.options;u&&f(s);let y=s.querySelector(c(m)),A=y.scrollHeight;s.classList.add(p),requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.style.height=u?"".concat(A,"px"):"auto"})}),this.updateARIA(s,{ariaExpanded:!0,ariaDisabled:!h})},closeElement(s){let u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],{panelClass:m,activeClass:p,beforeClose:h}=this.options,f=s.querySelector(c(m)),y=f.scrollHeight;s.classList.remove(p),u?(h(s),requestAnimationFrame(()=>{f.style.height="".concat(y,"px"),requestAnimationFrame(()=>{f.style.height=0})})):f.style.height=0,this.updateARIA(s,{ariaExpanded:!1,ariaDisabled:!1})},toggleElement(s){let{activeClass:u,collapse:m}=this.options,p=s.classList.contains(u);if(!p||m)return p?this.closeElement(s):this.showElement(s)},closeElements(){let{activeClass:s,showMultiple:u}=this.options;u||this.elements.forEach((m,p)=>{m.classList.contains(s)&&p!==this.currFocusedIdx&&this.closeElement(m)})},handleClick(s){let u=s.currentTarget;this.elements.forEach((m,p)=>{m.contains(u)&&s.target.nodeName!=="A"&&(this.currFocusedIdx=p,this.closeElements(),this.focus(s,m),this.toggleElement(m))})},handleKeydown(s){switch(s.key){case"ArrowUp":return this.focusPrevElement(s);case"ArrowDown":return this.focusNextElement(s);case"Home":return this.focusFirstElement(s);case"End":return this.focusLastElement(s);default:return null}},handleFocus(s){let u=s.currentTarget,m=this.elements.find(p=>p.contains(u));this.currFocusedIdx=this.elements.indexOf(m)},handleTransitionEnd(s){if(s.stopPropagation(),s.propertyName!=="height")return;let{onOpen:u,onClose:m}=this.options,p=s.currentTarget,h=parseInt(p.style.height),f=this.elements.find(y=>y.contains(p));h>0?(p.style.height="auto",u(f)):m(f)}};this.attachEvents=()=>{if(d)return;let{triggerClass:s,panelClass:u}=a.options;a.handleClick=a.handleClick.bind(a),a.handleKeydown=a.handleKeydown.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleTransitionEnd=a.handleTransitionEnd.bind(a),a.elements.forEach(m=>{let p=m.querySelector(c(s)),h=m.querySelector(c(u));p.addEventListener("click",a.handleClick),p.addEventListener("keydown",a.handleKeydown),p.addEventListener("focus",a.handleFocus),h.addEventListener("transitionend",a.handleTransitionEnd)}),d=!0},this.detachEvents=()=>{if(!d)return;let{triggerClass:s,panelClass:u}=a.options;a.elements.forEach(m=>{let p=m.querySelector(c(s)),h=m.querySelector(c(u));p.removeEventListener("click",a.handleClick),p.removeEventListener("keydown",a.handleKeydown),p.removeEventListener("focus",a.handleFocus),h.removeEventListener("transitionend",a.handleTransitionEnd)}),d=!1},this.toggle=s=>{let u=a.elements[s];u&&a.toggleElement(u)},this.open=s=>{let u=a.elements[s];u&&a.showElement(u)},this.openAll=()=>{let{activeClass:s,onOpen:u}=a.options;a.elements.forEach(m=>{m.classList.contains(s)||(a.showElement(m,!1),u(m))})},this.close=s=>{let u=a.elements[s];u&&a.closeElement(u)},this.closeAll=()=>{let{activeClass:s,onClose:u}=a.options;a.elements.forEach(m=>{m.classList.contains(s)&&(a.closeElement(m,!1),u(m))})},this.destroy=()=>{this.detachEvents(),this.openAll(),a.elements.forEach(s=>{a.removeIDs(s),a.removeARIA(s),a.setTransition(s,!0),s.classList.remove(i)}),d=!0},this.update=()=>{a.createDefinitions(),this.detachEvents(),this.attachEvents()};let c=s=>".".concat(CSS.escape(s));a.init()};typeof R<"u"&&R.exports!==void 0?R.exports=t:n.Accordion=t})(window)});var b=(n,e=8e3)=>{let t=document.querySelector('[data-role="error"]');t&&(t.textContent=n,t.classList.remove("hide"),setTimeout(()=>{t.classList.add("hide")},e))};var me="America/Los_Angeles",ze=new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:me}),Je=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:me}),pe=n=>{let e=new Date(n);return ze.format(e)},he=n=>{let e=new Date(n);return Je.format(e)},w=(n,e="USD")=>n==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:e,maximumFractionDigits:2}).format(n);function fe(){let t=".no-transition",r=document.querySelector('[ll-selector="loader"]');if(!r)return;r.style.opacity="1",r.style.display="flex",r.style.transition="opacity 1300ms ease";let o=()=>{r&&(r.style.opacity="0",setTimeout(()=>{r.style.display="none"},1300))},i=()=>{r&&(r.style.display="flex",r.offsetWidth,r.style.opacity="1")};document.body.classList.add("no-scroll-transition"),setTimeout(()=>{o(),document.body.classList.remove("no-scroll-transition")},500),document.addEventListener("click",d=>{let c=d.target.closest("a");if(!c)return;let s=c.getAttribute("href");if(c.hostname!==window.location.hostname||!s||s.includes("#")||s.endsWith("/")&&s.indexOf("#")!==-1||c.matches(t)||c.getAttribute("target")==="_blank"||c.getAttribute("download")!==null)return;d.preventDefault();let u=c.getAttribute("href");u&&(document.body.classList.add("no-scroll-transition"),i(),setTimeout(()=>{window.location.href=u},800))}),window.addEventListener("pageshow",d=>{d.persisted&&(o(),document.body.classList.remove("no-scroll-transition"))});let l;window.addEventListener("resize",()=>{clearTimeout(l),l=window.setTimeout(()=>{r&&(r.style.display="none")},50)})}var ge=Xe(ye(),1),Ee=function(n){new ge.default(n,{showMultiple:!0})};var E=(n,e,t)=>{let r=n.querySelector(`[data-field="${e}"]`);if(!r){console.warn(`Element with data-field="${e}" not found`);return}r.textContent=t};var q="GraphQL Client";var B="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",G="Response returned unexpected Content-Type:",Q="An unknown error has occurred. The API did not return a data object or any errors in its response.",k={json:"application/json",multipart:"multipart/mixed"},K="X-SDK-Variant",j="X-SDK-Version",Te="shopify-graphql-client",Ae="1.4.1",M=1e3,be=[429,503],Y=/@(defer)\b/i,ve=`\r
`,Se=/boundary="?([^=";]+)"?/i,W=ve+ve;function S(n,e=q){return n.startsWith(`${e}`)?n:`${e}: ${n}`}function C(n){return n instanceof Error?n.message:JSON.stringify(n)}function X(n){return n instanceof Error&&n.cause?n.cause:void 0}function z(n){return n.flatMap(({errors:e})=>e??[])}function D({client:n,retries:e}){if(e!==void 0&&(typeof e!="number"||e<0||e>3))throw new Error(`${n}: The provided "retries" value (${e}) is invalid - it cannot be less than ${0} or greater than ${3}`)}function v(n,e){return e&&(typeof e!="object"||Array.isArray(e)||typeof e=="object"&&Object.keys(e).length>0)?{[n]:e}:{}}function J(n,e){if(n.length===0)return e;let r={[n.pop()]:e};return n.length===0?r:J(n,r)}function we(n,e){return Object.keys(e||{}).reduce((t,r)=>(typeof e[r]=="object"||Array.isArray(e[r]))&&n[r]?(t[r]=we(n[r],e[r]),t):(t[r]=e[r],t),Array.isArray(n)?[...n]:{...n})}function Z([n,...e]){return e.reduce(we,{...n})}function ee({clientLogger:n,customFetchApi:e=fetch,client:t=q,defaultRetryWaitTime:r=M,retriableCodes:o=be}){let i=async(l,d,a)=>{let c=d+1,s=a+1,u;try{if(u=await e(...l),n({type:"HTTP-Response",content:{requestParams:l,response:u}}),!u.ok&&o.includes(u.status)&&c<=s)throw new Error;let m=u?.headers.get("X-Shopify-API-Deprecated-Reason")||"";return m&&n({type:"HTTP-Response-GraphQL-Deprecation-Notice",content:{requestParams:l,deprecationNotice:m}}),u}catch(m){if(c<=s){let p=u?.headers.get("Retry-After");return await Ze(p?parseInt(p,10):r),n({type:"HTTP-Retry",content:{requestParams:l,lastResponse:u,retryAttempt:d,maxRetries:a}}),i(l,c,a)}throw new Error(S(`${a>0?`Attempted maximum number of ${a} network retries. Last message - `:""}${C(m)}`,t))}};return i}async function Ze(n){return new Promise(e=>setTimeout(e,n))}function te({headers:n,url:e,customFetchApi:t=fetch,retries:r=0,logger:o}){D({client:q,retries:r});let i={headers:n,url:e,retries:r},l=et(o),d=ee({customFetchApi:t,clientLogger:l,defaultRetryWaitTime:M}),a=tt(d,i),c=rt(a),s=lt(a);return{config:i,fetch:a,request:c,requestStream:s}}function et(n){return e=>{n&&n(e)}}async function qe(n){let{errors:e,data:t,extensions:r}=await n.json();return{...v("data",t),...v("extensions",r),headers:n.headers,...e||!t?{errors:{networkStatusCode:n.status,message:S(e?B:Q),...v("graphQLErrors",e),response:n}}:{}}}function tt(n,{url:e,headers:t,retries:r}){return async(o,i={})=>{let{variables:l,headers:d,url:a,retries:c,keepalive:s,signal:u}=i,m=JSON.stringify({query:o,variables:l});D({client:q,retries:c});let p=Object.entries({...t,...d}).reduce((f,[y,A])=>(f[y]=Array.isArray(A)?A.join(", "):A.toString(),f),{});return!p[K]&&!p[j]&&(p[K]=Te,p[j]=Ae),n([a??e,{method:"POST",headers:p,body:m,signal:u,keepalive:s}],1,c??r)}}function rt(n){return async(...e)=>{if(Y.test(e[0]))throw new Error(S("This operation will result in a streamable response - use requestStream() instead."));let t=null;try{t=await n(...e);let{status:r,statusText:o}=t,i=t.headers.get("content-type")||"";return t.ok?i.includes(k.json)?await qe(t):{errors:{networkStatusCode:r,message:S(`${G} ${i}`),response:t}}:{errors:{networkStatusCode:r,message:S(o),response:t}}}catch(r){return{errors:{message:C(r),...t==null?{}:{networkStatusCode:t.status,response:t}}}}}}async function*nt(n){let e=new TextDecoder;if(n.body[Symbol.asyncIterator])for await(let t of n.body)yield e.decode(t);else{let t=n.body.getReader(),r;try{for(;!(r=await t.read()).done;)yield e.decode(r.value)}finally{t.cancel()}}}function st(n,e){return{async*[Symbol.asyncIterator](){try{let t="";for await(let r of n)if(t+=r,t.indexOf(e)>-1){let o=t.lastIndexOf(e),l=t.slice(0,o).split(e).filter(d=>d.trim().length>0).map(d=>d.slice(d.indexOf(W)+W.length).trim());l.length>0&&(yield l),t=t.slice(o+e.length),t.trim()==="--"&&(t="")}}catch(t){throw new Error(`Error occured while processing stream payload - ${C(t)}`)}}}}function ot(n){return{async*[Symbol.asyncIterator](){yield{...await qe(n),hasNext:!1}}}}function at(n){return n.map(e=>{try{return JSON.parse(e)}catch(t){throw new Error(`Error in parsing multipart response - ${C(t)}`)}}).map(e=>{let{data:t,incremental:r,hasNext:o,extensions:i,errors:l}=e;if(!r)return{data:t||{},...v("errors",l),...v("extensions",i),hasNext:o};let d=r.map(({data:a,path:c,errors:s})=>({data:a&&c?J(c,a):{},...v("errors",s)}));return{data:d.length===1?d[0].data:Z([...d.map(({data:a})=>a)]),...v("errors",z(d)),hasNext:o}})}function it(n,e){if(n.length>0)throw new Error(B,{cause:{graphQLErrors:n}});if(Object.keys(e).length===0)throw new Error(Q)}function ct(n,e){let t=(e??"").match(Se),r=`--${t?t[1]:"-"}`;if(!n.body?.getReader&&!n.body?.[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:n});let o=nt(n),i={},l;return{async*[Symbol.asyncIterator](){try{let d=!0;for await(let a of st(o,r)){let c=at(a);l=c.find(u=>u.extensions)?.extensions??l;let s=z(c);i=Z([i,...c.map(({data:u})=>u)]),d=c.slice(-1)[0].hasNext,it(s,i),yield{...v("data",i),...v("extensions",l),hasNext:d}}if(d)throw new Error("Response stream terminated unexpectedly")}catch(d){let a=X(d);yield{...v("data",i),...v("extensions",l),errors:{message:S(C(d)),networkStatusCode:n.status,...v("graphQLErrors",a?.graphQLErrors),response:n},hasNext:!1}}}}}function lt(n){return async(...e)=>{if(!Y.test(e[0]))throw new Error(S("This operation does not result in a streamable response - use request() instead."));try{let t=await n(...e),{statusText:r}=t;if(!t.ok)throw new Error(r,{cause:t});let o=t.headers.get("content-type")||"";switch(!0){case o.includes(k.json):return ot(t);case o.includes(k.multipart):return ct(t,o);default:throw new Error(`${G} ${o}`,{cause:t})}}catch(t){return{async*[Symbol.asyncIterator](){let r=X(t);yield{errors:{message:S(C(t)),...v("networkStatusCode",r?.status),...v("response",r)},hasNext:!1}}}}}}function re({client:n,storeDomain:e}){try{if(!e||typeof e!="string")throw new Error;let t=e.trim(),r=t.match(/^https?:/)?t:`https://${t}`,o=new URL(r);return o.protocol="https",o.origin}catch(t){throw new Error(`${n}: a valid store domain ("${e}") must be provided`,{cause:t})}}function x({client:n,currentSupportedApiVersions:e,apiVersion:t,logger:r}){let o=`${n}: the provided apiVersion ("${t}")`,i=`Currently supported API versions: ${e.join(", ")}`;if(!t||typeof t!="string")throw new Error(`${o} is invalid. ${i}`);let l=t.trim();e.includes(l)||(r?r({type:"Unsupported_Api_Version",content:{apiVersion:t,supportedApiVersions:e}}):console.warn(`${o} is likely deprecated or not supported. ${i}`))}function H(n){let e=n*3-2;return e===10?e:`0${e}`}function ne(n,e,t){let r=e-t;return r<=0?`${n-1}-${H(r+4)}`:`${n}-${H(r)}`}function Ie(){let n=new Date,e=n.getUTCMonth(),t=n.getUTCFullYear(),r=Math.floor(e/3+1);return{year:t,quarter:r,version:`${t}-${H(r)}`}}function se(){let{year:n,quarter:e,version:t}=Ie(),r=e===4?`${n+1}-01`:`${n}-${H(e+1)}`;return[ne(n,e,3),ne(n,e,2),ne(n,e,1),t,r,"unstable"]}function oe(n){return e=>({...e??{},...n.headers})}function ae({getHeaders:n,getApiUrl:e}){return(t,r)=>{let o=[t];if(r&&Object.keys(r).length>0){let{variables:i,apiVersion:l,headers:d,retries:a,signal:c}=r;o.push({...i?{variables:i}:{},...d?{headers:n(d)}:{},...l?{url:e(l)}:{},...a?{retries:a}:{},...c?{signal:c}:{}})}return o}}var ie="application/json",Re="storefront-api-client",ke="1.0.9",Me="X-Shopify-Storefront-Access-Token",De="Shopify-Storefront-Private-Token",xe="X-SDK-Variant",He="X-SDK-Version",Ne="X-SDK-Variant-Source",I="Storefront API Client";function _e(n){if(n&&typeof window<"u")throw new Error(`${I}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function Pe(n,e){if(!n&&!e)throw new Error(`${I}: a public or private access token must be provided`);if(n&&e)throw new Error(`${I}: only provide either a public or private access token`)}function ce({storeDomain:n,apiVersion:e,publicAccessToken:t,privateAccessToken:r,clientName:o,retries:i=0,customFetchApi:l,logger:d}){let a=se(),c=re({client:I,storeDomain:n}),s={client:I,currentSupportedApiVersions:a,logger:d};x({...s,apiVersion:e}),Pe(t,r),_e(r);let u=ut(c,e,s),m={storeDomain:c,apiVersion:e,...t?{publicAccessToken:t}:{privateAccessToken:r},headers:{"Content-Type":ie,Accept:ie,[xe]:Re,[He]:ke,...o?{[Ne]:o}:{},...t?{[Me]:t}:{[De]:r}},apiUrl:u(),clientName:o},p=te({headers:m.headers,url:m.apiUrl,retries:i,customFetchApi:l,logger:d}),h=oe(m),f=dt(m,u),y=ae({getHeaders:h,getApiUrl:f});return Object.freeze({config:m,getHeaders:h,getApiUrl:f,fetch:(...L)=>p.fetch(...y(...L)),request:(...L)=>p.request(...y(...L)),requestStream:(...L)=>p.requestStream(...y(...L))})}function ut(n,e,t){return r=>{r&&x({...t,apiVersion:r});let o=(r??e).trim();return`${n}/api/${o}/graphql.json`}}function dt(n,e){return t=>t?e(t):n.apiUrl}function mt(n){if(!n)throw new Error("Invalid product ID");return n.startsWith("gid://")?n:`gid://shopify/Product/${n}`}function pt(n){if(!n)throw new Error("Invalid variant ID");return n.startsWith("gid://")?n:`gid://shopify/ProductVariant/${n}`}var ht="shop.lostlevelsarcade.com",ft="51611eac4adbd8d8496b9a639e0c3ef2",yt="2025-07",le=ce({storeDomain:ht,apiVersion:yt,publicAccessToken:ft});async function Ve(n){try{let e=mt(n),{data:t,errors:r}=await le.request(`
      query EventByID($id: ID!) {
        product(id: $id) {
          id
          title
          handle
          description
          gameType:  metafield(namespace:"custom", key:"game_type") { value }
          startTime: metafield(namespace:"custom", key:"start_time") { value }
          duration:  metafield(namespace:"custom", key:"duration") { value }
          format:    metafield(namespace:"custom", key:"format") { value }
          totalCap:  metafield(namespace:"custom", key:"total_cap") { value }
          complementaryProducts: metafield(namespace:"shopify--discovery--product_recommendation", key:"complementary_products") {
            references(first: 20) {
              edges { node { ... on Product { 
                id 
                title
                variants(first: 4) {
                  edges { node {
                    id 
                    title 
                    quantityAvailable
                    price { amount currencyCode }
                  }}
                }
              }}}
            }
          }
          variants(first: 50) {
            edges { node {
              id
              title
              quantityAvailable
              price { amount currencyCode }
              selectedOptions { name value }
            } }
          }
        }
      }
      `,{variables:{id:e}});if(r)throw new Error(r.graphQLErrors?.[0]?.message||r.message);return t.product}catch(e){return console.error(`Error fetching event product with ID ${n}:`,e),null}}async function ue(n){try{let{data:e,errors:t}=await le.request(`
      query EventByHandle($handle: String!) {
        productByHandle(handle: $handle) {
          id
          title
          handle
          description
          gameType:  metafield(namespace:"custom", key:"game_type") { value }
          startTime: metafield(namespace:"custom", key:"start_time") { value }
          duration:  metafield(namespace:"custom", key:"duration") { value }
          format:    metafield(namespace:"custom", key:"format") { value }
          totalCap:  metafield(namespace:"custom", key:"total_cap") { value }
          complementaryProducts: metafield(namespace:"shopify--discovery--product_recommendation", key:"complementary_products") {
            references(first: 20) {
              edges { node { ... on Product { 
                id 
                title
                variants(first: 4) {
                  edges { node {
                    id 
                    title 
                    quantityAvailable
                    price { amount currencyCode }
                  }}
                }
              }}}
            }
          }
          variants(first: 50) {
            edges { node {
              id
              title
              quantityAvailable
              price { amount currencyCode }
              selectedOptions { name value }
            } }
          }
        }
      }
      `,{variables:{handle:n}});if(t)throw new Error(t.graphQLErrors?.[0]?.message||t.message);return e.productByHandle}catch(e){return console.error(`Error fetching event product with handle ${n}:`,e),null}}async function Ue(n){try{let e=n.map(i=>({merchandiseId:pt(i.merchandiseId),quantity:i.quantity,attributes:i.attributes||[]})),{data:t,errors:r}=await le.request(`
      mutation cartCreate($input: CartInput) {
        cartCreate(input: $input) {
          cart { id checkoutUrl }
          userErrors { field message }
        }
      }
      `,{variables:{input:{lines:e}}});if(r)throw new Error(r.graphQLErrors?.[0]?.message||r.message);let o=t?.cartCreate?.userErrors;if(o?.length)throw new Error(o[0]?.message||"Cart create failed");return t?.cartCreate?.cart}catch(e){throw console.error("Error creating cart with lines:",e),e}}var N=class{constructor(e,t){g(this,"cartEl");g(this,"cartManager");this.cartManager=e,this.cartEl=t,this.hideCartItemTemplate()}update(e="USD"){if(!this.cartEl){console.error("Cart element not found");return}let t=this.cartEl.querySelector('[data-field="cart-items"]'),r=this.cartEl.querySelector('[data-field="cart-subtotal"]'),o=document.querySelector('[data-field="cart-line-item"]');if(!t||!r||!o){console.error("Required cart elements not found");return}console.info("Updating cart display"),this.hideTemplate(o),t.innerHTML="";let i=this.cartManager.getItems(),l=this.cartManager.getSubtotal();i.forEach(d=>{let a=this.createCartItemElement(o,d,e);t.appendChild(a)}),r.textContent=w(l,e)}hideTemplate(e){e.classList.add("hide")}hideCartItemTemplate(){let e=document.querySelector('[data-field="cart-line-item"]');e&&e.classList.add("hide")}createCartItemElement(e,t,r){let o=e.cloneNode(!0);o.classList.remove("hide");let i=o.querySelector('[data-field="cart-line-title"]');if(i){let c=t.quantity&&t.quantity>1?`${t.title} (${t.quantity}x)`:t.title;i.textContent=c}let l=o.querySelector('[data-field="cart-line-variant"]');l&&(l.textContent=t.variant);let d=o.querySelector('[data-field="cart-line-price"]');d&&(d.textContent=w(t.price,r));let a=o.querySelector('[data-role="cart-line-clear"]');return t.id!=="event"&&a?(a.classList.remove("hide"),a.addEventListener("click",()=>this.cartManager.removeItem(t.id))):a&&a.classList.add("hide"),o}};var _=class{constructor(e){g(this,"items",[]);g(this,"onUpdateCallback");this.onUpdateCallback=e}getItems(){return[...this.items]}getSubtotal(){return this.items.reduce((e,t)=>e+t.price,0)}updateEventItem(e,t,r,o){this.items=this.items.filter(i=>i.id!=="event"),this.items.push({id:"event",title:t,variant:r,price:o}),this.triggerUpdate()}addUpsellItem(e){let t=this.items.findIndex(r=>r.id===e.id);if(t>=0){let r=this.items[t];this.items[t]={...r,quantity:(r.quantity||1)+(e.quantity||1),price:e.price*((r.quantity||1)+(e.quantity||1))}}else this.items.push(e);return this.triggerUpdate(),!0}removeItem(e){this.items=this.items.filter(t=>t.id!==e),this.triggerUpdate()}triggerUpdate(){this.onUpdateCallback?.()}};var P=class{constructor(e){this.product=e;g(this,"state",{requirePlayerName:!1,requireMtgAccount:!1,requireTcgAccount:!1,requireTcgUsername:!1,requireRphAccount:!1,requireRphUsername:!1,requirePokemonAccount:!1,requirePokemonId:!1});this.setupListeners(),this.updateFieldVisibility()}getState(){return{...this.state}}setupListeners(){this.setupAccountRadioListeners("mtg-account","mtg-username"),this.setupAccountRadioListeners("tcg-account","tcg-username"),this.setupAccountRadioListeners("rph-account","rph-username"),this.setupAccountRadioListeners("pokemon-account","pokemon-id")}setupAccountRadioListeners(e,t){let r=document.querySelector(`input[name="${e}"][id="${e}-true"]`),o=document.querySelector(`input[name="${e}"][id="${e}-false"]`),i=document.querySelector(`[data-role="${t}"]`);if(r&&o&&i){let l=()=>{let d=r.checked;i.classList.toggle("hide",!d),i.querySelectorAll("input").forEach(c=>{c.required=d})};r.addEventListener("change",l),o.addEventListener("change",l),l()}}updateFieldVisibility(){this.updateGameSpecificFields(),this.recheckAllAccountRadios()}recheckAllAccountRadios(){[{radio:"mtg-account",field:"mtg-username"},{radio:"tcg-account",field:"tcg-username"},{radio:"rph-account",field:"rph-username"},{radio:"pokemon-account",field:"pokemon-id"}].forEach(({radio:t,field:r})=>{if(this.state[`require${this.capitalizeFirst(t.replace("-",""))}`]&&document.querySelector(`input[name="${t}"][id="${t}-true"]`)?.checked){let i=document.querySelector(`[data-role="${r}"]`);i&&(i.classList.remove("hide"),i.querySelectorAll("input").forEach(d=>{d.required=!0}))}})}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}updateGameSpecificFields(){let e=(this.product.gameType?.value||"").toLowerCase();this.hideAllGameFields(),this.state.requireMtgAccount=!1,this.state.requireTcgAccount=!1,this.state.requireTcgUsername=!1,this.state.requireRphAccount=!1,this.state.requireRphUsername=!1,this.state.requirePokemonAccount=!1,this.state.requirePokemonId=!1,e==="magic"?this.showMtgFields():e==="gundam"||e==="one piece"?this.showTcgFields():e==="lorcana"?this.showRphFields():e==="pokemon"?this.showPokemonFields():console.info(`Game type '${e}' doesn't require specific account fields`)}hideAllGameFields(){["mtg-account","tcg-account","tcg-username","rph-account","rph-username","pokemon-account","pokemon-id"].forEach(t=>{let r=document.querySelector(`[data-role="${t}"]`);r&&(r.classList.add("hide"),r.querySelectorAll("input, select").forEach(i=>{i.required=!1}))})}showMtgFields(){let e=document.querySelector('[data-role="mtg-account"]');e&&(e.classList.remove("hide"),this.state.requireMtgAccount=!0)}showTcgFields(){let e=document.querySelector('[data-role="tcg-account"]');if(e&&(e.classList.remove("hide"),this.state.requireTcgAccount=!0,this.state.requireTcgUsername=!0,document.querySelector('input[name="tcg-account"][id="tcg-account-true"]')?.checked)){let r=document.querySelector('[data-role="tcg-username"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(i=>{i.required=!0}))}}showRphFields(){let e=document.querySelector('[data-role="rph-account"]');if(e&&(e.classList.remove("hide"),this.state.requireRphAccount=!0,this.state.requireRphUsername=!0,document.querySelector('input[name="rph-account"][id="rph-account-true"]')?.checked)){let r=document.querySelector('[data-role="rph-username"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(i=>{i.required=!0}))}}showPokemonFields(){let e=document.querySelector('[data-role="pokemon-account"]');if(e&&(e.classList.remove("hide"),this.state.requirePokemonAccount=!0,this.state.requirePokemonId=!0,document.querySelector('input[name="pokemon-account"][id="pokemon-account-true"]')?.checked)){let r=document.querySelector('[data-role="pokemon-id"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(i=>{i.required=!0}))}}validate(){let e=this.getFormValue("field-first-name"),t=this.getFormValue("field-last-name");if(!e){let c="Please enter the player's first name.";return this.showError(c),{valid:!1,error:c}}if(!t){let c="Please enter the player's last name.";return this.showError(c),{valid:!1,error:c}}if(!this.getFormValue("field-phone")){let c="Please enter the player's phone number.";return this.showError(c),{valid:!1,error:c}}let o=this.getFormValue("field-bday");if(!o){let c="Please enter the player's date of birth.";return this.showError(c),{valid:!1,error:c}}let i=new Date(o),l=new Date;if(i>=l){let c="Date of birth must be in the past.";return this.showError(c),{valid:!1,error:c}}let d=12,a=new Date;if(a.setFullYear(l.getFullYear()-d),i>a){let c=`Player must be at least ${d} years old.`;return this.showError(c),{valid:!1,error:c}}if(this.state.requireMtgAccount){let c=document.querySelector('input[name="mtg-account"]:checked');if(!c){let s="Please indicate if you have the MTG Companion App.";return this.showError(s),{valid:!1,error:s}}if(c.id==="mtg-account-false"){let s="You need the MTG Companion App to participate in this event.";return this.showError(s),{valid:!1,error:s}}}if(this.state.requireTcgAccount){let c=document.querySelector('input[name="tcg-account"]:checked');if(!c){let s="Please indicate if you have a TCG Plus account.";return this.showError(s),{valid:!1,error:s}}if(c.id==="tcg-account-false"){let s="You need a TCG Plus account to participate in this event.";return this.showError(s),{valid:!1,error:s}}}if(this.state.requireTcgUsername&&!this.getFormValue("field-tcg-username")){let s="Please enter your TCG Plus username.";return this.showError(s),{valid:!1,error:s}}if(this.state.requireRphAccount){let c=document.querySelector('input[name="rph-account"]:checked');if(!c){let s="Please indicate if you have a Ravensburger Play Hub account.";return this.showError(s),{valid:!1,error:s}}if(c.id==="rph-account-false"){let s="You need a Ravensburger Play Hub account to participate in this event.";return this.showError(s),{valid:!1,error:s}}}if(this.state.requireRphUsername&&!this.getFormValue("field-rph-username")){let s="Please enter your Ravensburger Play Hub username.";return this.showError(s),{valid:!1,error:s}}if(this.state.requirePokemonAccount){let c=document.querySelector('input[name="pokemon-account"]:checked');if(!c){let s="Please indicate if you have a Pok\xE9mon ID.";return this.showError(s),{valid:!1,error:s}}if(c.id==="pokemon-account-false"){let s="You need a Pok\xE9mon ID to participate in this event.";return this.showError(s),{valid:!1,error:s}}}if(this.state.requirePokemonId&&!this.getFormValue("field-pokemon-id")){let s="Please enter your Pok\xE9mon ID.";return this.showError(s),{valid:!1,error:s}}return{valid:!0}}showError(e){b(e)}getFormValue(e){return(document.querySelector(`[data-role="${e}"]`)?.value||"").trim()}};var V=class{constructor(e,t,r,o){this.product=e;this.cartManager=t;this.formManager=r;this.getChosenVariantId=o;g(this,"form");g(this,"submitBtn");g(this,"errBox");this.form=document.querySelector('[data-role="event-form"]'),this.submitBtn=document.querySelector('[data-role="submit"]'),this.errBox=document.querySelector('[data-role="error"]'),this.setupButtonStateManagement()}setupFormHandler(){if(!this.form){console.error("Form not found");return}this.form.addEventListener("submit",async e=>{e.preventDefault(),await this.handleFormSubmission()})}async handleFormSubmission(){this.clearErrors();let e=this.validateForm();if(!e.valid){b(e.error||"Validation error");return}this.disableSubmitButton();try{let r=(await this.createEventCart())?.checkoutUrl;if(!r)throw new Error("Could not create checkout.");window.location.href=r}catch(t){console.error("[events] checkout error",t),b("Something went wrong. Please try again."),this.enableSubmitButton()}}validateForm(){if(!this.getChosenVariantId()){let t="This event is sold out.";return b(t),{valid:!1,error:t}}return this.formManager.validate()}async createEventCart(){let e=this.formManager.getState(),t=this.getFormValue("field-first-name"),r=this.getFormValue("field-last-name"),o=`${t} ${r}`.trim(),i=this.getFormValue("field-phone"),l=this.getFormValue("field-bday"),d=e.requireMtgAccount?this.getRadioValue("mtg-account"):"",a=e.requireTcgAccount?this.getRadioValue("tcg-account"):"",c=e.requireTcgUsername?this.getFormValue("field-tcg-username"):"",s=e.requireRphAccount?this.getRadioValue("rph-account"):"",u=e.requireRphUsername?this.getFormValue("field-rph-username"):"",m=e.requirePokemonAccount?this.getRadioValue("pokemon-id"):"",p=e.requirePokemonId?this.getFormValue("field-pokemon-id"):"",h=[{merchandiseId:this.getChosenVariantId(),quantity:1,attributes:[{key:"Game",value:this.product.gameType?.value||""},{key:"Format",value:this.product.format?.value||""},{key:"Player Name",value:o},{key:"Phone Number",value:i},{key:"Date of Birth",value:l}]}];return d&&h[0].attributes.push({key:"MTG Companion App",value:d}),a&&h[0].attributes.push({key:"TCG Plus Account",value:a}),c&&h[0].attributes.push({key:"TCG Plus Username",value:c}),s&&h[0].attributes.push({key:"Ravensburger Play Hub Account",value:s}),u&&h[0].attributes.push({key:"Ravensburger Play Hub Username",value:u}),m&&h[0].attributes.push({key:"Pok\xE9mon ID Account",value:m}),p&&h[0].attributes.push({key:"Pok\xE9mon ID",value:p}),this.cartManager.getItems().forEach(y=>{y.id!=="event"&&y.variantId&&h.push({merchandiseId:y.variantId,quantity:y.quantity||1,attributes:[]})}),Ue(h)}setupButtonStateManagement(){this.enableSubmitButton(),this.form&&(this.form.addEventListener("input",()=>this.enableSubmitButton()),this.form.addEventListener("change",()=>this.enableSubmitButton())),document.addEventListener("visibilitychange",()=>{document.hidden||this.enableSubmitButton()}),window.addEventListener("focus",()=>this.enableSubmitButton())}enableSubmitButton(){this.submitBtn&&this.submitBtn.disabled&&(this.submitBtn.disabled=!1)}disableSubmitButton(){this.submitBtn&&(this.submitBtn.disabled=!0)}clearErrors(){this.errBox&&(this.errBox.textContent="",this.errBox.classList.add("hide"))}getFormValue(e){return(document.querySelector(`[data-role="${e}"]`)?.value||"").trim()}getRadioValue(e){let t=document.querySelector(`input[name="${e}"][id="${e}-true"]`),r=document.querySelector(`input[name="${e}"][id="${e}-false"]`);return t?.checked?"Yes":r?.checked?"No":""}};var U=(n,e)=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>n(...r),e)}};var F=class{constructor(e,t){this.product=e;this.cartManager=t;g(this,"variants",[]);g(this,"chosenVariantId",null);g(this,"hasSelectedVariant",!1);g(this,"currency");g(this,"totalCap",null);this.variants=(e.variants?.edges||[]).map(r=>r.node),this.currency=this.variants[0]?.price?.currencyCode||"USD",this.totalCap=e.totalCap?.value?Number(e.totalCap.value):null}async render(){let e=document.querySelector('[data-role="ticket"]'),t=e?.parentElement||null;if(!t||!e){console.error("Ticket template or container not found"),this.chosenVariantId=this.variants[0]?.id||null;return}e.classList.add("hide"),t.innerHTML="",[...this.variants].sort((o,i)=>{let l=Number(o.price?.amount||"0"),d=Number(i.price?.amount||"0");return l-d}).forEach(o=>{this.createTicketElement(o,e,t)})}getChosenVariantId(){return this.chosenVariantId}createTicketElement(e,t,r){let o=this.getVariantTitle(e);if(o==="Default Title"&&this.variants.length>1)return;let i=o==="Default Title"?"Single Entry":o,l=e.quantityAvailable||0,d=Number(e.price?.amount||"0"),a=t.cloneNode(!0);a.classList.remove("hide"),this.setTicketData(a,i,l,d),l<=0?this.setupSoldOutTicket(a):this.setupAvailableTicket(a,e,i),r.appendChild(a)}getVariantTitle(e){let t=e.title;if(e.selectedOptions&&e.selectedOptions.length>0){let r=e.selectedOptions.find(o=>o.name.toLowerCase()!=="title"&&o.value!=="Default Title");if(r)t=r.value;else{let o=e.selectedOptions.find(i=>i.name.toLowerCase()==="title"&&i.value!=="Default Title");o&&(t=o.value)}}return t}setTicketData(e,t,r,o){let i=e.querySelector('[data-field="variant-title"]'),l=e.querySelector('[data-field="seats"]'),d=e.querySelector('[data-field="price"]');i&&(i.textContent=t),l&&(l.textContent=r>0?`${r} ${this.totalCap&&this.totalCap>0?`/ ${this.totalCap} Open`:"Open"}`:"Sold out"),d&&(d.textContent=o===0?"Free":w(o,this.currency))}setupSoldOutTicket(e){e.classList.add("sold-out"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true")}setupAvailableTicket(e,t,r){e.dataset.variantId=t.id,e.setAttribute("aria-pressed","false");let o=U(()=>{this.updateEventInCart(t,r)},150);this.addTicketEventListeners(e,t,r,o),this.hasSelectedVariant||(this.chosenVariantId=t.id,this.setActiveTicket(e),this.updateEventInCart(t,r),this.hasSelectedVariant=!0)}addTicketEventListeners(e,t,r,o){let i=t.quantityAvailable||0;e.addEventListener("click",()=>{i<=0||(this.chosenVariantId=t.id,this.setActiveTicket(e),o())}),e.addEventListener("keydown",l=>{i<=0||(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),this.chosenVariantId=t.id,this.setActiveTicket(e),o())})}setActiveTicket(e){document.querySelectorAll('[data-role="ticket"]').forEach(t=>{t.querySelector('[data-field="checkbox"]')?.classList.remove("is-active"),t.setAttribute("aria-pressed","false")}),e.querySelector('[data-field="checkbox"]')?.classList.add("is-active"),e.setAttribute("aria-pressed","true")}updateEventInCart(e,t){let r=Number(e.price?.amount||"0");this.cartManager.updateEventItem("event",this.product.title,t,r)}};var $=class{constructor(e,t){this.product=e;this.cartManager=t;g(this,"upsellProducts",[]);this.extractUpsells()}async render(){let e=document.querySelector('[data-role="upsell"]'),t=e?.parentElement;if(!this.upsellProducts.length||!t||!e){t?.parentElement&&t.parentElement.classList.add("hide");return}e.classList.add("hide"),t.innerHTML="",this.upsellProducts.forEach(r=>{this.createUpsellElement(r,e,t)})}extractUpsells(){this.upsellProducts=(this.product.complementaryProducts?.references?.edges||[]).map(e=>e.node).filter(e=>!!e?.id).map(e=>({id:e?.id,title:e?.title||"Add-on",variants:(e?.variants?.edges||[]).map(t=>t.node).filter(t=>!!t?.id).map(t=>({id:t?.id,title:t?.title??"Untitled Variant",price:t?.price,quantityAvailable:t?.quantityAvailable||0,selectedOptions:t?.selectedOptions||[]}))})).filter(e=>e.variants.length>0)}createUpsellElement(e,t,r){let o=t.cloneNode(!0);o.classList.remove("hide"),this.setProductTitle(o,e.title);let l=this.findDefaultVariant(e.variants);e.variants.length>1?this.createVariantSelector(o,e.variants,d=>{l=d,this.updateUpsellDisplay(o,d),this.setupUpsellControls(o,e.title,d)}):this.hideVariantSelector(o),l&&(this.updateUpsellDisplay(o,l),this.setupUpsellControls(o,e.title,l)),r.appendChild(o)}setProductTitle(e,t){E(e,"upsell-title",t)}findDefaultVariant(e){let t=e.filter(o=>o.quantityAvailable>0);return(t.length>0?t:e).sort((o,i)=>{let l=Number(o.price?.amount||"0"),d=Number(i.price?.amount||"0");return l-d})[0]||null}createVariantSelector(e,t,r){let o=e.querySelector('[data-field="upsell-variants"]'),i=e.querySelector('[data-field="upsell-variant-item"]');!o||!i||(i.classList.add("hide"),o.innerHTML="",t.forEach((l,d)=>{let a=i.cloneNode(!0);a.classList.remove("hide");let c=this.getVariantOptionText(l),s=a.querySelector("div");s&&(s.textContent=c),a.classList.add("variant-option"),a.setAttribute("role","button"),a.setAttribute("tabindex","0"),d===0?(a.classList.add("selected"),a.setAttribute("aria-pressed","true")):a.setAttribute("aria-pressed","false");let u=()=>{o.querySelectorAll(".variant-option").forEach(m=>{m.classList.remove("selected"),m.setAttribute("aria-pressed","false")}),a.classList.add("selected"),a.setAttribute("aria-pressed","true"),r(l)};a.addEventListener("click",u),a.addEventListener("keydown",m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),u())}),o.appendChild(a)}))}getVariantOptionText(e){let t=e.selectedOptions?.filter(r=>r.value!=="Default Title"&&r.name.toLowerCase()!=="title")||[];return t.length>0?t.map(r=>r.value).join(" / "):e.title==="Default Title"?"Standard":e.title}hideVariantSelector(e){let t=e.querySelector('[data-field="upsell-variants"]');t&&t.classList.add("hide")}updateUpsellDisplay(e,t){let r=Number(t.price?.amount||"0"),o=t.price?.currencyCode||"USD",i=t.quantityAvailable;E(e,"upsell-price",w(r,o)),E(e,"upsell-stock-count",i.toString());let l=e.querySelector('[data-field="upsell-stock"]');l&&(i>0&&i<=5?l.classList.remove("hide"):l.classList.add("hide")),i<=0?e.classList.add("sold-out"):e.classList.remove("sold-out")}setupUpsellControls(e,t,r){let o=Number(r.price?.amount||"0"),i=r.quantityAvailable,l=Math.min(10,i),d=`upsell_${r.id.split("/").pop()}`,a=this.getVariantOptionText(r),c=`${t} - ${a}`,s=e.querySelector('[data-field="upsell-add"]'),u=e.querySelector('[data-field="upsell-qty-up"]'),m=e.querySelector('[data-field="upsell-qty-down"]'),p=1;if(E(e,"upsell-qty-count",p.toString()),s){let T=s.cloneNode(!0);s.parentNode?.replaceChild(T,s)}if(u){let T=u.cloneNode(!0);u.parentNode?.replaceChild(T,u)}if(m){let T=m.cloneNode(!0);m.parentNode?.replaceChild(T,m)}let h=e.querySelector('[data-field="upsell-add"]'),f=e.querySelector('[data-field="upsell-qty-up"]'),y=e.querySelector('[data-field="upsell-qty-down"]');if(i<=0){this.disableUpsellControls(e);return}h?.classList.remove("disabled");let A=h?.querySelector(".button-text");A&&(A.textContent="Add to Cart"),f?.addEventListener("click",()=>{p<l&&(p++,E(e,"upsell-qty-count",p.toString()))}),y?.addEventListener("click",()=>{p>1&&(p--,E(e,"upsell-qty-count",p.toString()))});let L=U(()=>{this.addUpsellToCart(d,c,o,p,r)},300);h?.addEventListener("click",()=>{h.classList.contains("disabled")||(h.classList.add("processing"),L(),setTimeout(()=>{h.classList.remove("processing")},350))})}disableUpsellControls(e){let t=e.querySelector('[data-field="upsell-add"]'),r=e.querySelector('[data-field="upsell-qty-wrap"]');if(t){let o=t.querySelector(".button-text");o&&(o.textContent="Out of Stock"),t.classList.add("disabled")}r&&(r.style.opacity="0.5")}addUpsellToCart(e,t,r,o,i){let a=this.cartManager.getItems().find(u=>u.id===e)?.quantity||0;if(a+o>i.quantityAvailable){let u=i.quantityAvailable-a;if(u<=0){b(`${t}: This item is already at maximum quantity in your cart.`);return}b(`${t}: Only ${u} more available. ${i.quantityAvailable} total in stock.`);return}this.cartManager.addUpsellItem({id:e,title:t,variant:"",price:r*o,quantity:o,variantId:i.id})&&console.log(`Added ${o}x ${t} to cart`)}};window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{fe();let n=Array.from(document.querySelectorAll('[ll-selector="accordion"]'));n.length>0?Ee(n):console.info("No accordion elements found.");let e=document.querySelector("#event-meta"),t=e?.getAttribute("data-handle")||void 0,r=e?.getAttribute("data-id")||void 0,o=location.pathname.split("/").filter(Boolean).pop(),i=t||o||"",l=await ue(i);if(i&&(console.info("[events] Fetching by handle:",i),l=await ue(i)),!l&&r){console.info("[events] Handle failed, trying CMS ID:",r);try{l=await Ve(r),l?console.info("[events] Successfully fetched by ID:",l.title):console.info("[events] No product found for ID:",r)}catch(T){console.error("[events] Failed to fetch by ID:",T)}}if(!l){Et(),console.error("[events] No product found for handle:",i,"or ID:",r),b("Event not found.");return}let d=l.startTime?.value?new Date(l.startTime.value):null;if(d?d<new Date:!1){de(l),gt();return}if((l.variants?.edges?.map(T=>T.node)||[]).reduce((T,$e)=>T+($e.quantityAvailable||0),0)<=0){de(l),vt();return}let m=document.querySelector('[data-role="cart"]'),p=new _,h=new N(p,m);p.onUpdateCallback=()=>{let T=l.variants?.edges?.[0]?.node?.price?.currencyCode||"USD";h.update(T)};let f=new P(l),y=new F(l,p),A=new $(l,p),L=new V(l,p,f,()=>y.getChosenVariantId());de(l),await y.render(),await A.render(),L.setupFormHandler()});function de(n){let e=n.startTime?.value?new Date(n.startTime.value):null;e&&(E(document,"date",pe(e)),E(document,"time",he(e))),E(document,"gameType",n.gameType?.value||""),E(document,"format",n.format?.value||""),E(document,"duration",n.duration?.value?`${Number(n.duration.value)} MINS`:"")}function gt(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0),Fe(),E(document,"seats","Event Completed")}function Et(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0),document.querySelector(".event_content_wrapper")?.childNodes?.forEach((r,o)=>{o>3&&r instanceof HTMLElement&&(r.classList.add("hide"),r.setAttribute("aria-hidden","true"))});let t=document.querySelector('[data-role="cart"]');t&&(t.classList.add("hide"),t.setAttribute("aria-hidden","true"))}function vt(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0,n.classList.add("disabled"),n.textContent="Sold Out");let e=document.querySelector(".event_content_passed");if(e){e.classList.remove("w-condition-invisible");let t=e.querySelector(".heading-style-h4");t&&(t.textContent="This event is sold out")}Fe(),E(document,"seats","Sold Out")}function Fe(){let n=document.querySelector(".event_content_form");n&&(n.classList.add("hide"),n.setAttribute("aria-hidden","true"));let e=document.querySelectorAll('[data-role="ticket"]');e&&e.forEach(r=>{r.classList.add("sold-out")});let t=document.querySelector(".event_content_upsell");t&&(t.classList.add("hide"),t.setAttribute("aria-hidden","true"))}})();
