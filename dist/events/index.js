"use strict";(()=>{var Oe=Object.create;var O=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Ge=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty;var je=(n,e,t)=>e in n?O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var We=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Ye=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ge(e))!Ke.call(n,s)&&s!==t&&O(n,s,{get:()=>e[s],enumerable:!(r=Be(e,s))||r.enumerable});return n};var Xe=(n,e,t)=>(t=n!=null?Oe(Qe(n)):{},Ye(e||!n||!n.__esModule?O(t,"default",{value:n,enumerable:!0}):t,n));var g=(n,e,t)=>je(n,typeof e!="symbol"?e+"":e,t);var ye=We((Lt,R)=>{"use strict";(function(n){let e=0,t=function(r,s){let a="js-enabled",l=this,d=!1;if(Array.isArray(r))return!!r.length&&r.map(o=>new t(o,s));let i={init(){this.options=Object.assign({duration:500,ariaEnabled:!0,collapse:!0,showMultiple:!1,onlyChildNodes:!0,openOnInit:[],elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel",activeClass:"is-active",beforeOpen:()=>{},onOpen:()=>{},beforeClose:()=>{},onClose:()=>{}},s);let o=typeof r=="string";this.container=o?document.querySelector(r):r,this.createDefinitions(),l.attachEvents()},createDefinitions(){let{elementClass:o,openOnInit:c,onlyChildNodes:u}=this.options,m=u?this.container.childNodes:this.container.querySelectorAll(p(o));this.elements=Array.from(m).filter(h=>h.classList&&h.classList.contains(o)),this.firstElement=this.elements[0],this.lastElement=this.elements[this.elements.length-1],this.elements.filter(h=>!h.classList.contains(a)).forEach(h=>{h.classList.add(a),this.generateIDs(h),this.setARIA(h),this.setTransition(h);let f=this.elements.indexOf(h);e++,c.includes(f)?this.showElement(h,!1):this.closeElement(h,!1)})},setTransition(o){let c=arguments.length>1&&arguments[1]!==void 0&&arguments[1],{duration:u,panelClass:m}=this.options;o.querySelector(p(m)).style.transitionDuration=c?null:"".concat(u,"ms")},generateIDs(o){let{triggerClass:c,panelClass:u}=this.options,m=o.querySelector(p(c)),h=o.querySelector(p(u));o.setAttribute("id",o.id||"ac-".concat(e)),m.setAttribute("id",m.id||"ac-trigger-".concat(e)),h.setAttribute("id",h.id||"ac-panel-".concat(e))},removeIDs(o){let{triggerClass:c,panelClass:u}=this.options,m=o.querySelector(p(c)),h=o.querySelector(p(u));o.id.startsWith("ac-")&&o.removeAttribute("id"),m.id.startsWith("ac-")&&m.removeAttribute("id"),h.id.startsWith("ac-")&&h.removeAttribute("id")},setARIA(o){let{ariaEnabled:c,triggerClass:u,panelClass:m}=this.options;if(!c)return;let h=o.querySelector(p(u)),f=o.querySelector(p(m));h.setAttribute("role","button"),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-disabled",!1),h.setAttribute("aria-expanded",!1),f.setAttribute("role","region"),f.setAttribute("aria-labelledby",h.id)},updateARIA(o,c){let{ariaExpanded:u,ariaDisabled:m}=c,{ariaEnabled:h,triggerClass:f}=this.options;if(!h)return;let y=o.querySelector(p(f));y.setAttribute("aria-expanded",u),y.setAttribute("aria-disabled",m)},removeARIA(o){let{ariaEnabled:c,triggerClass:u,panelClass:m}=this.options;if(!c)return;let h=o.querySelector(p(u)),f=o.querySelector(p(m));h.removeAttribute("role"),h.removeAttribute("aria-controls"),h.removeAttribute("aria-disabled"),h.removeAttribute("aria-expanded"),f.removeAttribute("role"),f.removeAttribute("aria-labelledby")},focus(o,c){o.preventDefault();let{triggerClass:u}=this.options;c.querySelector(p(u)).focus()},focusFirstElement(o){this.focus(o,this.firstElement),this.currFocusedIdx=0},focusLastElement(o){this.focus(o,this.lastElement),this.currFocusedIdx=this.elements.length-1},focusNextElement(o){let c=this.currFocusedIdx+1;if(c>this.elements.length-1)return this.focusFirstElement(o);this.focus(o,this.elements[c]),this.currFocusedIdx=c},focusPrevElement(o){let c=this.currFocusedIdx-1;if(c<0)return this.focusLastElement(o);this.focus(o,this.elements[c]),this.currFocusedIdx=c},showElement(o){let c=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],{panelClass:u,activeClass:m,collapse:h,beforeOpen:f}=this.options;c&&f(o);let y=o.querySelector(p(u)),A=y.scrollHeight;o.classList.add(m),requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.style.height=c?"".concat(A,"px"):"auto"})}),this.updateARIA(o,{ariaExpanded:!0,ariaDisabled:!h})},closeElement(o){let c=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],{panelClass:u,activeClass:m,beforeClose:h}=this.options,f=o.querySelector(p(u)),y=f.scrollHeight;o.classList.remove(m),c?(h(o),requestAnimationFrame(()=>{f.style.height="".concat(y,"px"),requestAnimationFrame(()=>{f.style.height=0})})):f.style.height=0,this.updateARIA(o,{ariaExpanded:!1,ariaDisabled:!1})},toggleElement(o){let{activeClass:c,collapse:u}=this.options,m=o.classList.contains(c);if(!m||u)return m?this.closeElement(o):this.showElement(o)},closeElements(){let{activeClass:o,showMultiple:c}=this.options;c||this.elements.forEach((u,m)=>{u.classList.contains(o)&&m!==this.currFocusedIdx&&this.closeElement(u)})},handleClick(o){let c=o.currentTarget;this.elements.forEach((u,m)=>{u.contains(c)&&o.target.nodeName!=="A"&&(this.currFocusedIdx=m,this.closeElements(),this.focus(o,u),this.toggleElement(u))})},handleKeydown(o){switch(o.key){case"ArrowUp":return this.focusPrevElement(o);case"ArrowDown":return this.focusNextElement(o);case"Home":return this.focusFirstElement(o);case"End":return this.focusLastElement(o);default:return null}},handleFocus(o){let c=o.currentTarget,u=this.elements.find(m=>m.contains(c));this.currFocusedIdx=this.elements.indexOf(u)},handleTransitionEnd(o){if(o.stopPropagation(),o.propertyName!=="height")return;let{onOpen:c,onClose:u}=this.options,m=o.currentTarget,h=parseInt(m.style.height),f=this.elements.find(y=>y.contains(m));h>0?(m.style.height="auto",c(f)):u(f)}};this.attachEvents=()=>{if(d)return;let{triggerClass:o,panelClass:c}=i.options;i.handleClick=i.handleClick.bind(i),i.handleKeydown=i.handleKeydown.bind(i),i.handleFocus=i.handleFocus.bind(i),i.handleTransitionEnd=i.handleTransitionEnd.bind(i),i.elements.forEach(u=>{let m=u.querySelector(p(o)),h=u.querySelector(p(c));m.addEventListener("click",i.handleClick),m.addEventListener("keydown",i.handleKeydown),m.addEventListener("focus",i.handleFocus),h.addEventListener("transitionend",i.handleTransitionEnd)}),d=!0},this.detachEvents=()=>{if(!d)return;let{triggerClass:o,panelClass:c}=i.options;i.elements.forEach(u=>{let m=u.querySelector(p(o)),h=u.querySelector(p(c));m.removeEventListener("click",i.handleClick),m.removeEventListener("keydown",i.handleKeydown),m.removeEventListener("focus",i.handleFocus),h.removeEventListener("transitionend",i.handleTransitionEnd)}),d=!1},this.toggle=o=>{let c=i.elements[o];c&&i.toggleElement(c)},this.open=o=>{let c=i.elements[o];c&&i.showElement(c)},this.openAll=()=>{let{activeClass:o,onOpen:c}=i.options;i.elements.forEach(u=>{u.classList.contains(o)||(i.showElement(u,!1),c(u))})},this.close=o=>{let c=i.elements[o];c&&i.closeElement(c)},this.closeAll=()=>{let{activeClass:o,onClose:c}=i.options;i.elements.forEach(u=>{u.classList.contains(o)&&(i.closeElement(u,!1),c(u))})},this.destroy=()=>{this.detachEvents(),this.openAll(),i.elements.forEach(o=>{i.removeIDs(o),i.removeARIA(o),i.setTransition(o,!0),o.classList.remove(a)}),d=!0},this.update=()=>{i.createDefinitions(),this.detachEvents(),this.attachEvents()};let p=o=>".".concat(CSS.escape(o));i.init()};typeof R<"u"&&R.exports!==void 0?R.exports=t:n.Accordion=t})(window)});var S=(n,e=8e3)=>{let t=document.querySelector('[data-role="error"]');t&&(t.textContent=n,t.classList.remove("hide"),setTimeout(()=>{t.classList.add("hide")},e))};var me="America/Los_Angeles",ze=new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",timeZone:me}),Je=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:me}),pe=n=>{let e=new Date(n);return ze.format(e)},he=n=>{let e=new Date(n);return Je.format(e)},w=(n,e="USD")=>n==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:e,maximumFractionDigits:2}).format(n);function fe(){console.log("Initializing page transitions");let n=1300,e=800,t=".no-transition",r=document.querySelector('[ll-selector="loader"]');if(console.log("Loader element:",r),!r)return;r.style.opacity="1",r.style.display="flex",r.style.transition=`opacity ${n}ms ease`;let s=()=>{console.log("Hiding loader"),r&&(r.style.opacity="0",setTimeout(()=>{r.style.display="none"},n))},a=()=>{r&&(r.style.display="flex",r.offsetWidth,r.style.opacity="1")};console.log("Executing intro animation directly"),document.body.classList.add("no-scroll-transition"),setTimeout(()=>{s(),document.body.classList.remove("no-scroll-transition")},500),document.addEventListener("click",d=>{let p=d.target.closest("a");if(!p)return;let o=p.getAttribute("href");if(p.hostname!==window.location.hostname||!o||o.includes("#")||o.endsWith("/")&&o.indexOf("#")!==-1||p.matches(t)||p.getAttribute("target")==="_blank"||p.getAttribute("download")!==null)return;d.preventDefault();let c=p.getAttribute("href");c&&(document.body.classList.add("no-scroll-transition"),a(),setTimeout(()=>{window.location.href=c},e))}),window.addEventListener("pageshow",d=>{console.log("Page show"),d.persisted&&(s(),document.body.classList.remove("no-scroll-transition"))});let l;window.addEventListener("resize",()=>{clearTimeout(l),l=window.setTimeout(()=>{r&&(r.style.display="none")},50)})}var ge=Xe(ye(),1),Ee=function(n){new ge.default(n,{showMultiple:!0})};var E=(n,e,t)=>{let r=n.querySelector(`[data-field="${e}"]`);if(!r){console.warn(`Element with data-field="${e}" not found`);return}r.textContent=t};var q="GraphQL Client";var B="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",G="Response returned unexpected Content-Type:",Q="An unknown error has occurred. The API did not return a data object or any errors in its response.",k={json:"application/json",multipart:"multipart/mixed"},K="X-SDK-Variant",j="X-SDK-Version",Te="shopify-graphql-client",Ae="1.4.1",M=1e3,Se=[429,503],W=/@(defer)\b/i,ve=`\r
`,be=/boundary="?([^=";]+)"?/i,Y=ve+ve;function b(n,e=q){return n.startsWith(`${e}`)?n:`${e}: ${n}`}function C(n){return n instanceof Error?n.message:JSON.stringify(n)}function X(n){return n instanceof Error&&n.cause?n.cause:void 0}function z(n){return n.flatMap(({errors:e})=>e??[])}function x({client:n,retries:e}){if(e!==void 0&&(typeof e!="number"||e<0||e>3))throw new Error(`${n}: The provided "retries" value (${e}) is invalid - it cannot be less than ${0} or greater than ${3}`)}function v(n,e){return e&&(typeof e!="object"||Array.isArray(e)||typeof e=="object"&&Object.keys(e).length>0)?{[n]:e}:{}}function J(n,e){if(n.length===0)return e;let r={[n.pop()]:e};return n.length===0?r:J(n,r)}function we(n,e){return Object.keys(e||{}).reduce((t,r)=>(typeof e[r]=="object"||Array.isArray(e[r]))&&n[r]?(t[r]=we(n[r],e[r]),t):(t[r]=e[r],t),Array.isArray(n)?[...n]:{...n})}function Z([n,...e]){return e.reduce(we,{...n})}function ee({clientLogger:n,customFetchApi:e=fetch,client:t=q,defaultRetryWaitTime:r=M,retriableCodes:s=Se}){let a=async(l,d,i)=>{let p=d+1,o=i+1,c;try{if(c=await e(...l),n({type:"HTTP-Response",content:{requestParams:l,response:c}}),!c.ok&&s.includes(c.status)&&p<=o)throw new Error;let u=c?.headers.get("X-Shopify-API-Deprecated-Reason")||"";return u&&n({type:"HTTP-Response-GraphQL-Deprecation-Notice",content:{requestParams:l,deprecationNotice:u}}),c}catch(u){if(p<=o){let m=c?.headers.get("Retry-After");return await Ze(m?parseInt(m,10):r),n({type:"HTTP-Retry",content:{requestParams:l,lastResponse:c,retryAttempt:d,maxRetries:i}}),a(l,p,i)}throw new Error(b(`${i>0?`Attempted maximum number of ${i} network retries. Last message - `:""}${C(u)}`,t))}};return a}async function Ze(n){return new Promise(e=>setTimeout(e,n))}function te({headers:n,url:e,customFetchApi:t=fetch,retries:r=0,logger:s}){x({client:q,retries:r});let a={headers:n,url:e,retries:r},l=et(s),d=ee({customFetchApi:t,clientLogger:l,defaultRetryWaitTime:M}),i=tt(d,a),p=rt(i),o=lt(i);return{config:a,fetch:i,request:p,requestStream:o}}function et(n){return e=>{n&&n(e)}}async function qe(n){let{errors:e,data:t,extensions:r}=await n.json();return{...v("data",t),...v("extensions",r),headers:n.headers,...e||!t?{errors:{networkStatusCode:n.status,message:b(e?B:Q),...v("graphQLErrors",e),response:n}}:{}}}function tt(n,{url:e,headers:t,retries:r}){return async(s,a={})=>{let{variables:l,headers:d,url:i,retries:p,keepalive:o,signal:c}=a,u=JSON.stringify({query:s,variables:l});x({client:q,retries:p});let m=Object.entries({...t,...d}).reduce((f,[y,A])=>(f[y]=Array.isArray(A)?A.join(", "):A.toString(),f),{});return!m[K]&&!m[j]&&(m[K]=Te,m[j]=Ae),n([i??e,{method:"POST",headers:m,body:u,signal:c,keepalive:o}],1,p??r)}}function rt(n){return async(...e)=>{if(W.test(e[0]))throw new Error(b("This operation will result in a streamable response - use requestStream() instead."));let t=null;try{t=await n(...e);let{status:r,statusText:s}=t,a=t.headers.get("content-type")||"";return t.ok?a.includes(k.json)?await qe(t):{errors:{networkStatusCode:r,message:b(`${G} ${a}`),response:t}}:{errors:{networkStatusCode:r,message:b(s),response:t}}}catch(r){return{errors:{message:C(r),...t==null?{}:{networkStatusCode:t.status,response:t}}}}}}async function*nt(n){let e=new TextDecoder;if(n.body[Symbol.asyncIterator])for await(let t of n.body)yield e.decode(t);else{let t=n.body.getReader(),r;try{for(;!(r=await t.read()).done;)yield e.decode(r.value)}finally{t.cancel()}}}function st(n,e){return{async*[Symbol.asyncIterator](){try{let t="";for await(let r of n)if(t+=r,t.indexOf(e)>-1){let s=t.lastIndexOf(e),l=t.slice(0,s).split(e).filter(d=>d.trim().length>0).map(d=>d.slice(d.indexOf(Y)+Y.length).trim());l.length>0&&(yield l),t=t.slice(s+e.length),t.trim()==="--"&&(t="")}}catch(t){throw new Error(`Error occured while processing stream payload - ${C(t)}`)}}}}function ot(n){return{async*[Symbol.asyncIterator](){yield{...await qe(n),hasNext:!1}}}}function it(n){return n.map(e=>{try{return JSON.parse(e)}catch(t){throw new Error(`Error in parsing multipart response - ${C(t)}`)}}).map(e=>{let{data:t,incremental:r,hasNext:s,extensions:a,errors:l}=e;if(!r)return{data:t||{},...v("errors",l),...v("extensions",a),hasNext:s};let d=r.map(({data:i,path:p,errors:o})=>({data:i&&p?J(p,i):{},...v("errors",o)}));return{data:d.length===1?d[0].data:Z([...d.map(({data:i})=>i)]),...v("errors",z(d)),hasNext:s}})}function at(n,e){if(n.length>0)throw new Error(B,{cause:{graphQLErrors:n}});if(Object.keys(e).length===0)throw new Error(Q)}function ct(n,e){let t=(e??"").match(be),r=`--${t?t[1]:"-"}`;if(!n.body?.getReader&&!n.body?.[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:n});let s=nt(n),a={},l;return{async*[Symbol.asyncIterator](){try{let d=!0;for await(let i of st(s,r)){let p=it(i);l=p.find(c=>c.extensions)?.extensions??l;let o=z(p);a=Z([a,...p.map(({data:c})=>c)]),d=p.slice(-1)[0].hasNext,at(o,a),yield{...v("data",a),...v("extensions",l),hasNext:d}}if(d)throw new Error("Response stream terminated unexpectedly")}catch(d){let i=X(d);yield{...v("data",a),...v("extensions",l),errors:{message:b(C(d)),networkStatusCode:n.status,...v("graphQLErrors",i?.graphQLErrors),response:n},hasNext:!1}}}}}function lt(n){return async(...e)=>{if(!W.test(e[0]))throw new Error(b("This operation does not result in a streamable response - use request() instead."));try{let t=await n(...e),{statusText:r}=t;if(!t.ok)throw new Error(r,{cause:t});let s=t.headers.get("content-type")||"";switch(!0){case s.includes(k.json):return ot(t);case s.includes(k.multipart):return ct(t,s);default:throw new Error(`${G} ${s}`,{cause:t})}}catch(t){return{async*[Symbol.asyncIterator](){let r=X(t);yield{errors:{message:b(C(t)),...v("networkStatusCode",r?.status),...v("response",r)},hasNext:!1}}}}}}function re({client:n,storeDomain:e}){try{if(!e||typeof e!="string")throw new Error;let t=e.trim(),r=t.match(/^https?:/)?t:`https://${t}`,s=new URL(r);return s.protocol="https",s.origin}catch(t){throw new Error(`${n}: a valid store domain ("${e}") must be provided`,{cause:t})}}function D({client:n,currentSupportedApiVersions:e,apiVersion:t,logger:r}){let s=`${n}: the provided apiVersion ("${t}")`,a=`Currently supported API versions: ${e.join(", ")}`;if(!t||typeof t!="string")throw new Error(`${s} is invalid. ${a}`);let l=t.trim();e.includes(l)||(r?r({type:"Unsupported_Api_Version",content:{apiVersion:t,supportedApiVersions:e}}):console.warn(`${s} is likely deprecated or not supported. ${a}`))}function H(n){let e=n*3-2;return e===10?e:`0${e}`}function ne(n,e,t){let r=e-t;return r<=0?`${n-1}-${H(r+4)}`:`${n}-${H(r)}`}function Ie(){let n=new Date,e=n.getUTCMonth(),t=n.getUTCFullYear(),r=Math.floor(e/3+1);return{year:t,quarter:r,version:`${t}-${H(r)}`}}function se(){let{year:n,quarter:e,version:t}=Ie(),r=e===4?`${n+1}-01`:`${n}-${H(e+1)}`;return[ne(n,e,3),ne(n,e,2),ne(n,e,1),t,r,"unstable"]}function oe(n){return e=>({...e??{},...n.headers})}function ie({getHeaders:n,getApiUrl:e}){return(t,r)=>{let s=[t];if(r&&Object.keys(r).length>0){let{variables:a,apiVersion:l,headers:d,retries:i,signal:p}=r;s.push({...a?{variables:a}:{},...d?{headers:n(d)}:{},...l?{url:e(l)}:{},...i?{retries:i}:{},...p?{signal:p}:{}})}return s}}var ae="application/json",Re="storefront-api-client",ke="1.0.9",Me="X-Shopify-Storefront-Access-Token",xe="Shopify-Storefront-Private-Token",De="X-SDK-Variant",He="X-SDK-Version",Ne="X-SDK-Variant-Source",I="Storefront API Client";function _e(n){if(n&&typeof window<"u")throw new Error(`${I}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function Pe(n,e){if(!n&&!e)throw new Error(`${I}: a public or private access token must be provided`);if(n&&e)throw new Error(`${I}: only provide either a public or private access token`)}function ce({storeDomain:n,apiVersion:e,publicAccessToken:t,privateAccessToken:r,clientName:s,retries:a=0,customFetchApi:l,logger:d}){let i=se(),p=re({client:I,storeDomain:n}),o={client:I,currentSupportedApiVersions:i,logger:d};D({...o,apiVersion:e}),Pe(t,r),_e(r);let c=ut(p,e,o),u={storeDomain:p,apiVersion:e,...t?{publicAccessToken:t}:{privateAccessToken:r},headers:{"Content-Type":ae,Accept:ae,[De]:Re,[He]:ke,...s?{[Ne]:s}:{},...t?{[Me]:t}:{[xe]:r}},apiUrl:c(),clientName:s},m=te({headers:u.headers,url:u.apiUrl,retries:a,customFetchApi:l,logger:d}),h=oe(u),f=dt(u,c),y=ie({getHeaders:h,getApiUrl:f});return Object.freeze({config:u,getHeaders:h,getApiUrl:f,fetch:(...L)=>m.fetch(...y(...L)),request:(...L)=>m.request(...y(...L)),requestStream:(...L)=>m.requestStream(...y(...L))})}function ut(n,e,t){return r=>{r&&D({...t,apiVersion:r});let s=(r??e).trim();return`${n}/api/${s}/graphql.json`}}function dt(n,e){return t=>t?e(t):n.apiUrl}function mt(n){if(!n)throw new Error("Invalid product ID");return n.startsWith("gid://")?n:`gid://shopify/Product/${n}`}function pt(n){if(!n)throw new Error("Invalid variant ID");return n.startsWith("gid://")?n:`gid://shopify/ProductVariant/${n}`}var ht="shop.lostlevelsarcade.com",ft="51611eac4adbd8d8496b9a639e0c3ef2",yt="2025-07",le=ce({storeDomain:ht,apiVersion:yt,publicAccessToken:ft});async function Ve(n){try{let e=mt(n),{data:t,errors:r}=await le.request(`
      query EventByID($id: ID!) {
        product(id: $id) {
          id
          title
          handle
          description
          gameType:  metafield(namespace:"custom", key:"game_type") { value }
          startTime: metafield(namespace:"custom", key:"start_time") { value }
          duration:  metafield(namespace:"custom", key:"duration") { value }
          format:    metafield(namespace:"custom", key:"format") { value }
          complementaryProducts: metafield(namespace:"shopify--discovery--product_recommendation", key:"complementary_products") {
            references(first: 20) {
              edges { node { ... on Product { 
                id 
                title
                variants(first: 4) {
                  edges { node {
                    id 
                    title 
                    quantityAvailable
                    price { amount currencyCode }
                  }}
                }
              }}}
            }
          }
          variants(first: 50) {
            edges { node {
              id
              title
              quantityAvailable
              price { amount currencyCode }
              selectedOptions { name value }
            } }
          }
        }
      }
      `,{variables:{id:e}});if(r)throw new Error(r.graphQLErrors?.[0]?.message||r.message);return t.product}catch(e){return console.error(`Error fetching event product with ID ${n}:`,e),null}}async function ue(n){try{let{data:e,errors:t}=await le.request(`
      query EventByHandle($handle: String!) {
        productByHandle(handle: $handle) {
          id
          title
          handle
          description
          gameType:  metafield(namespace:"custom", key:"game_type") { value }
          startTime: metafield(namespace:"custom", key:"start_time") { value }
          duration:  metafield(namespace:"custom", key:"duration") { value }
          format:    metafield(namespace:"custom", key:"format") { value }
          complementaryProducts: metafield(namespace:"shopify--discovery--product_recommendation", key:"complementary_products") {
            references(first: 20) {
              edges { node { ... on Product { 
                id 
                title
                variants(first: 4) {
                  edges { node {
                    id 
                    title 
                    quantityAvailable
                    price { amount currencyCode }
                  }}
                }
              }}}
            }
          }
          variants(first: 50) {
            edges { node {
              id
              title
              quantityAvailable
              price { amount currencyCode }
              selectedOptions { name value }
            } }
          }
        }
      }
      `,{variables:{handle:n}});if(t)throw new Error(t.graphQLErrors?.[0]?.message||t.message);return e.productByHandle}catch(e){return console.error(`Error fetching event product with handle ${n}:`,e),null}}async function Ue(n){try{let e=n.map(a=>({merchandiseId:pt(a.merchandiseId),quantity:a.quantity,attributes:a.attributes||[]})),{data:t,errors:r}=await le.request(`
      mutation cartCreate($input: CartInput) {
        cartCreate(input: $input) {
          cart { id checkoutUrl }
          userErrors { field message }
        }
      }
      `,{variables:{input:{lines:e}}});if(r)throw new Error(r.graphQLErrors?.[0]?.message||r.message);let s=t?.cartCreate?.userErrors;if(s?.length)throw new Error(s[0]?.message||"Cart create failed");return t?.cartCreate?.cart}catch(e){throw console.error("Error creating cart with lines:",e),e}}var N=class{constructor(e,t){g(this,"cartEl");g(this,"cartManager");this.cartManager=e,this.cartEl=t,this.hideCartItemTemplate()}update(e="USD"){if(!this.cartEl){console.error("Cart element not found");return}let t=this.cartEl.querySelector('[data-field="cart-items"]'),r=this.cartEl.querySelector('[data-field="cart-subtotal"]'),s=document.querySelector('[data-field="cart-line-item"]');if(!t||!r||!s){console.error("Required cart elements not found");return}console.info("Updating cart display"),this.hideTemplate(s),t.innerHTML="";let a=this.cartManager.getItems(),l=this.cartManager.getSubtotal();a.forEach(d=>{let i=this.createCartItemElement(s,d,e);t.appendChild(i)}),r.textContent=w(l,e)}hideTemplate(e){e.classList.add("hide")}hideCartItemTemplate(){let e=document.querySelector('[data-field="cart-line-item"]');e&&e.classList.add("hide")}createCartItemElement(e,t,r){let s=e.cloneNode(!0);s.classList.remove("hide");let a=s.querySelector('[data-field="cart-line-title"]');if(a){let p=t.quantity&&t.quantity>1?`${t.title} (${t.quantity}x)`:t.title;a.textContent=p}let l=s.querySelector('[data-field="cart-line-variant"]');l&&(l.textContent=t.variant);let d=s.querySelector('[data-field="cart-line-price"]');d&&(d.textContent=w(t.price,r));let i=s.querySelector('[data-role="cart-line-clear"]');return t.id!=="event"&&i?(i.classList.remove("hide"),i.addEventListener("click",()=>this.cartManager.removeItem(t.id))):i&&i.classList.add("hide"),s}};var _=class{constructor(e){g(this,"items",[]);g(this,"onUpdateCallback");this.onUpdateCallback=e}getItems(){return[...this.items]}getSubtotal(){return this.items.reduce((e,t)=>e+t.price,0)}updateEventItem(e,t,r,s){this.items=this.items.filter(a=>a.id!=="event"),this.items.push({id:"event",title:t,variant:r,price:s}),this.triggerUpdate()}addUpsellItem(e){let t=this.items.findIndex(r=>r.id===e.id);if(t>=0){let r=this.items[t];this.items[t]={...r,quantity:(r.quantity||1)+(e.quantity||1),price:e.price*((r.quantity||1)+(e.quantity||1))}}else this.items.push(e);return this.triggerUpdate(),!0}removeItem(e){this.items=this.items.filter(t=>t.id!==e),this.triggerUpdate()}triggerUpdate(){this.onUpdateCallback?.()}};var P=class{constructor(e){this.product=e;g(this,"state",{participant:"self",requirePlayerName:!1,requireMtgAccount:!1,requireTcgAccount:!1,requireTcgUsername:!1,requireRphAccount:!1,requireRphUsername:!1,requirePokemonAccount:!1,requirePokemonId:!1});this.setupListeners(),this.updateFieldVisibility()}getState(){return{...this.state}}setupListeners(){let e=document.getElementById("self"),t=document.getElementById("other");e&&t&&(e.addEventListener("change",()=>{e.checked&&(this.state.participant="self",this.updateFieldVisibility())}),t.addEventListener("change",()=>{t.checked&&(this.state.participant="other",this.updateFieldVisibility())}),!e.checked&&!t.checked&&(e.checked=!0,this.state.participant="self")),this.setupAccountRadioListeners("mtg-account","mtg-username"),this.setupAccountRadioListeners("tcg-account","tcg-username"),this.setupAccountRadioListeners("rph-account","rph-username"),this.setupAccountRadioListeners("pokemon-account","pokemon-id")}setupAccountRadioListeners(e,t){let r=document.querySelector(`input[name="${e}"][id="${e}-true"]`),s=document.querySelector(`input[name="${e}"][id="${e}-false"]`),a=document.querySelector(`[data-role="${t}"]`);if(r&&s&&a){let l=()=>{let d=r.checked;a.classList.toggle("hide",!d),a.querySelectorAll("input").forEach(p=>{p.required=d})};r.addEventListener("change",l),s.addEventListener("change",l),l()}}updateFieldVisibility(){this.updatePlayerNameFields(),this.updateGameSpecificFields(),this.recheckAllAccountRadios()}recheckAllAccountRadios(){[{radio:"mtg-account",field:"mtg-username"},{radio:"tcg-account",field:"tcg-username"},{radio:"rph-account",field:"rph-username"},{radio:"pokemon-account",field:"pokemon-id"}].forEach(({radio:t,field:r})=>{if(this.state[`require${this.capitalizeFirst(t.replace("-",""))}`]&&document.querySelector(`input[name="${t}"][id="${t}-true"]`)?.checked){let a=document.querySelector(`[data-role="${r}"]`);a&&(a.classList.remove("hide"),a.querySelectorAll("input").forEach(d=>{d.required=!0}))}})}capitalizeFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}updatePlayerNameFields(){let e=document.querySelector('[data-role="player-name"]');if(!e)return;let t=this.state.participant==="other";e.classList.toggle("hide",!t),this.state.requirePlayerName=t,e.querySelectorAll("input").forEach(s=>{s.required=t})}updateGameSpecificFields(){let e=(this.product.gameType?.value||"").toLowerCase();this.hideAllGameFields(),this.state.requireMtgAccount=!1,this.state.requireTcgAccount=!1,this.state.requireTcgUsername=!1,this.state.requireRphAccount=!1,this.state.requireRphUsername=!1,this.state.requirePokemonAccount=!1,this.state.requirePokemonId=!1,e==="magic"?this.showMtgFields():e==="gundam"||e==="one piece"?this.showTcgFields():e==="lorcana"?this.showRphFields():e==="pokemon"?this.showPokemonFields():console.log(`Game type '${e}' doesn't require specific account fields`)}hideAllGameFields(){["mtg-account","tcg-account","tcg-username","rph-account","rph-username","pokemon-account","pokemon-id"].forEach(t=>{let r=document.querySelector(`[data-role="${t}"]`);r&&(r.classList.add("hide"),r.querySelectorAll("input, select").forEach(a=>{a.required=!1}))})}showMtgFields(){let e=document.querySelector('[data-role="mtg-account"]');e&&(e.classList.remove("hide"),this.state.requireMtgAccount=!0)}showTcgFields(){let e=document.querySelector('[data-role="tcg-account"]');if(e&&(e.classList.remove("hide"),this.state.requireTcgAccount=!0,this.state.requireTcgUsername=!0,document.querySelector('input[name="tcg-account"][id="tcg-account-true"]')?.checked)){let r=document.querySelector('[data-role="tcg-username"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(a=>{a.required=!0}))}}showRphFields(){let e=document.querySelector('[data-role="rph-account"]');if(e&&(e.classList.remove("hide"),this.state.requireRphAccount=!0,this.state.requireRphUsername=!0,document.querySelector('input[name="rph-account"][id="rph-account-true"]')?.checked)){let r=document.querySelector('[data-role="rph-username"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(a=>{a.required=!0}))}}showPokemonFields(){let e=document.querySelector('[data-role="pokemon-account"]');if(e&&(e.classList.remove("hide"),this.state.requirePokemonAccount=!0,this.state.requirePokemonId=!0,document.querySelector('input[name="pokemon-account"][id="pokemon-account-true"]')?.checked)){let r=document.querySelector('[data-role="pokemon-id"]');r&&(r.classList.remove("hide"),r.querySelectorAll("input").forEach(a=>{a.required=!0}))}}validate(){if(this.state.requirePlayerName){let e=this.getFormValue("field-first-name"),t=this.getFormValue("field-last-name");if(!e){let r="Please enter the player's first name.";return this.showError(r),{valid:!1,error:r}}if(!t){let r="Please enter the player's last name.";return this.showError(r),{valid:!1,error:r}}}if(this.state.requireMtgAccount){let e=document.querySelector('input[name="mtg-account"]:checked');if(!e){let t="Please indicate if you have the MTG Companion App.";return this.showError(t),{valid:!1,error:t}}if(e.id==="mtg-account-false"){let t="You need the MTG Companion App to participate in this event.";return this.showError(t),{valid:!1,error:t}}}if(this.state.requireTcgAccount){let e=document.querySelector('input[name="tcg-account"]:checked');if(!e){let t="Please indicate if you have a TCG Plus account.";return this.showError(t),{valid:!1,error:t}}if(e.id==="tcg-account-false"){let t="You need a TCG Plus account to participate in this event.";return this.showError(t),{valid:!1,error:t}}}if(this.state.requireRphAccount){let e=document.querySelector('input[name="rph-account"]:checked');if(!e){let t="Please indicate if you have a Ravensburger Play Hub account.";return this.showError(t),{valid:!1,error:t}}if(e.id==="rph-account-false"){let t="You need a Ravensburger Play Hub account to participate in this event.";return this.showError(t),{valid:!1,error:t}}}if(this.state.requirePokemonAccount){let e=document.querySelector('input[name="pokemon-account"]:checked');if(!e){let t="Please indicate if you have a Pok\xE9mon ID.";return this.showError(t),{valid:!1,error:t}}if(e.id==="pokemon-account-false"){let t="You need a Pok\xE9mon ID to participate in this event.";return this.showError(t),{valid:!1,error:t}}}return{valid:!0}}showError(e){S(e)}getFormValue(e){return(document.querySelector(`[data-role="${e}"]`)?.value||"").trim()}};var V=class{constructor(e,t,r,s){this.product=e;this.cartManager=t;this.formManager=r;this.getChosenVariantId=s;g(this,"form");g(this,"submitBtn");g(this,"errBox");this.form=document.querySelector('[data-role="event-form"]'),this.submitBtn=document.querySelector('[data-role="submit"]'),this.errBox=document.querySelector('[data-role="error"]'),this.setupButtonStateManagement()}setupFormHandler(){if(!this.form){console.error("Form not found");return}this.form.addEventListener("submit",async e=>{e.preventDefault(),await this.handleFormSubmission()})}async handleFormSubmission(){this.clearErrors();let e=this.validateForm();if(!e.valid){S(e.error||"Validation error");return}this.disableSubmitButton();try{let r=(await this.createEventCart())?.checkoutUrl;if(!r)throw new Error("Could not create checkout.");window.location.href=r}catch(t){console.error("[events] checkout error",t),S("Something went wrong. Please try again."),this.enableSubmitButton()}}validateForm(){if(!this.getChosenVariantId()){let t="This event is sold out.";return S(t),{valid:!1,error:t}}return this.formManager.validate()}async createEventCart(){let e=this.formManager.getState(),t=this.getFormValue("field-first-name"),r=this.getFormValue("field-last-name"),s=`${t} ${r}`.trim(),a=e.requireMtgAccount?this.getRadioValue("mtg-account"):"",l=e.requireTcgAccount?this.getRadioValue("tcg-account"):"",d=e.requireTcgUsername?this.getFormValue("field-tcg-username"):"",i=e.requireRphAccount?this.getRadioValue("rph-account"):"",p=e.requireRphUsername?this.getFormValue("field-rph-username"):"",o=e.requirePokemonAccount?this.getRadioValue("pokemon-id"):"",c=e.requirePokemonId?this.getFormValue("field-pokemon-id"):"",u=[{merchandiseId:this.getChosenVariantId(),quantity:1,attributes:[{key:"Game",value:this.product.gameType?.value||""},{key:"Format",value:this.product.format?.value||""},{key:"Participant",value:e.participant.charAt(0).toUpperCase()+e.participant.slice(1)}]}];return e.participant==="other"&&t&&r&&u[0].attributes.push({key:"Player Name",value:s}),a&&u[0].attributes.push({key:"MTG Companion App",value:a}),l&&u[0].attributes.push({key:"TCG Plus Account",value:l}),d&&u[0].attributes.push({key:"TCG Plus Username",value:d}),i&&u[0].attributes.push({key:"Ravensburger Play Hub Account",value:i}),p&&u[0].attributes.push({key:"Ravensburger Play Hub Username",value:p}),o&&u[0].attributes.push({key:"Pok\xE9mon ID Account",value:o}),c&&u[0].attributes.push({key:"Pok\xE9mon ID",value:c}),this.cartManager.getItems().forEach(h=>{h.id!=="event"&&h.variantId&&u.push({merchandiseId:h.variantId,quantity:h.quantity||1,attributes:[]})}),Ue(u)}setupButtonStateManagement(){this.enableSubmitButton(),this.form&&(this.form.addEventListener("input",()=>this.enableSubmitButton()),this.form.addEventListener("change",()=>this.enableSubmitButton())),document.addEventListener("visibilitychange",()=>{document.hidden||this.enableSubmitButton()}),window.addEventListener("focus",()=>this.enableSubmitButton())}enableSubmitButton(){this.submitBtn&&this.submitBtn.disabled&&(this.submitBtn.disabled=!1)}disableSubmitButton(){this.submitBtn&&(this.submitBtn.disabled=!0)}clearErrors(){this.errBox&&(this.errBox.textContent="",this.errBox.classList.add("hide"))}getFormValue(e){return(document.querySelector(`[data-role="${e}"]`)?.value||"").trim()}getRadioValue(e){let t=document.querySelector(`input[name="${e}"][id="${e}-true"]`),r=document.querySelector(`input[name="${e}"][id="${e}-false"]`);return t?.checked?"Yes":r?.checked?"No":""}};var U=(n,e)=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>n(...r),e)}};var F=class{constructor(e,t){this.product=e;this.cartManager=t;g(this,"variants",[]);g(this,"chosenVariantId",null);g(this,"hasSelectedVariant",!1);g(this,"currency");this.variants=(e.variants?.edges||[]).map(r=>r.node),this.currency=this.variants[0]?.price?.currencyCode||"USD"}async render(){let e=document.querySelector('[data-role="ticket"]'),t=e?.parentElement||null;if(!t||!e){console.error("Ticket template or container not found"),this.chosenVariantId=this.variants[0]?.id||null;return}e.classList.add("hide"),t.innerHTML="",[...this.variants].sort((s,a)=>{let l=Number(s.price?.amount||"0"),d=Number(a.price?.amount||"0");return l-d}).forEach(s=>{console.info("Creating ticket for variant",s),this.createTicketElement(s,e,t)})}getChosenVariantId(){return this.chosenVariantId}createTicketElement(e,t,r){let s=this.getVariantTitle(e);if(s==="Default Title"&&this.variants.length>1)return;let a=s==="Default Title"?"Single Entry":s,l=e.quantityAvailable||0,d=Number(e.price?.amount||"0"),i=t.cloneNode(!0);i.classList.remove("hide"),this.setTicketData(i,a,l,d),l<=0?(console.info("Setting up sold out ticket for variant",e),this.setupSoldOutTicket(i)):this.setupAvailableTicket(i,e,a),r.appendChild(i)}getVariantTitle(e){let t=e.title;if(e.selectedOptions&&e.selectedOptions.length>0){let r=e.selectedOptions.find(s=>s.name.toLowerCase()!=="title"&&s.value!=="Default Title");if(r)t=r.value;else{let s=e.selectedOptions.find(a=>a.name.toLowerCase()==="title"&&a.value!=="Default Title");s&&(t=s.value)}}return t}setTicketData(e,t,r,s){let a=e.querySelector('[data-field="variant-title"]'),l=e.querySelector('[data-field="seats"]'),d=e.querySelector('[data-field="price"]');a&&(a.textContent=t),l&&(l.textContent=r>0?`${r} seat${r===1?"":"s"} left`:"Sold out"),d&&(d.textContent=s===0?"Free":w(s,this.currency))}setupSoldOutTicket(e){e.classList.add("sold-out"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true")}setupAvailableTicket(e,t,r){e.dataset.variantId=t.id,e.setAttribute("aria-pressed","false");let s=U(()=>{this.updateEventInCart(t,r)},150);this.addTicketEventListeners(e,t,r,s),this.hasSelectedVariant||(this.chosenVariantId=t.id,this.setActiveTicket(e),this.updateEventInCart(t,r),this.hasSelectedVariant=!0)}addTicketEventListeners(e,t,r,s){let a=t.quantityAvailable||0;e.addEventListener("click",()=>{a<=0||(this.chosenVariantId=t.id,this.setActiveTicket(e),s())}),e.addEventListener("keydown",l=>{a<=0||(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),this.chosenVariantId=t.id,this.setActiveTicket(e),s())})}setActiveTicket(e){document.querySelectorAll('[data-role="ticket"]').forEach(t=>{t.querySelector('[data-field="checkbox"]')?.classList.remove("is-active"),t.setAttribute("aria-pressed","false")}),e.querySelector('[data-field="checkbox"]')?.classList.add("is-active"),e.setAttribute("aria-pressed","true")}updateEventInCart(e,t){let r=Number(e.price?.amount||"0");this.cartManager.updateEventItem("event",this.product.title,t,r)}};var $=class{constructor(e,t){this.product=e;this.cartManager=t;g(this,"upsellProducts",[]);this.extractUpsells()}async render(){let e=document.querySelector('[data-role="upsell"]'),t=e?.parentElement;if(!this.upsellProducts.length||!t||!e){t?.parentElement&&t.parentElement.classList.add("hide");return}e.classList.add("hide"),t.innerHTML="",this.upsellProducts.forEach(r=>{this.createUpsellElement(r,e,t)})}extractUpsells(){this.upsellProducts=(this.product.complementaryProducts?.references?.edges||[]).map(e=>e.node).filter(e=>!!e?.id).map(e=>({id:e?.id,title:e?.title||"Add-on",variants:(e?.variants?.edges||[]).map(t=>t.node).filter(t=>!!t?.id).map(t=>({id:t?.id,title:t?.title??"Untitled Variant",price:t?.price,quantityAvailable:t?.quantityAvailable||0,selectedOptions:t?.selectedOptions||[]}))})).filter(e=>e.variants.length>0)}createUpsellElement(e,t,r){let s=t.cloneNode(!0);s.classList.remove("hide"),this.setProductTitle(s,e.title);let l=this.findDefaultVariant(e.variants);e.variants.length>1?this.createVariantSelector(s,e.variants,d=>{l=d,this.updateUpsellDisplay(s,d),this.setupUpsellControls(s,e.title,d)}):this.hideVariantSelector(s),l&&(this.updateUpsellDisplay(s,l),this.setupUpsellControls(s,e.title,l)),r.appendChild(s)}setProductTitle(e,t){E(e,"upsell-title",t)}findDefaultVariant(e){let t=e.filter(s=>s.quantityAvailable>0);return(t.length>0?t:e).sort((s,a)=>{let l=Number(s.price?.amount||"0"),d=Number(a.price?.amount||"0");return l-d})[0]||null}createVariantSelector(e,t,r){let s=e.querySelector('[data-field="upsell-variants"]'),a=e.querySelector('[data-field="upsell-variant-item"]');!s||!a||(a.classList.add("hide"),s.innerHTML="",t.forEach((l,d)=>{let i=a.cloneNode(!0);i.classList.remove("hide");let p=this.getVariantOptionText(l),o=i.querySelector("div");o&&(o.textContent=p),i.classList.add("variant-option"),i.setAttribute("role","button"),i.setAttribute("tabindex","0"),d===0?(i.classList.add("selected"),i.setAttribute("aria-pressed","true")):i.setAttribute("aria-pressed","false");let c=()=>{s.querySelectorAll(".variant-option").forEach(u=>{u.classList.remove("selected"),u.setAttribute("aria-pressed","false")}),i.classList.add("selected"),i.setAttribute("aria-pressed","true"),r(l)};i.addEventListener("click",c),i.addEventListener("keydown",u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),c())}),s.appendChild(i)}))}getVariantOptionText(e){let t=e.selectedOptions?.filter(r=>r.value!=="Default Title"&&r.name.toLowerCase()!=="title")||[];return t.length>0?t.map(r=>r.value).join(" / "):e.title==="Default Title"?"Standard":e.title}hideVariantSelector(e){let t=e.querySelector('[data-field="upsell-variants"]');t&&t.classList.add("hide")}updateUpsellDisplay(e,t){let r=Number(t.price?.amount||"0"),s=t.price?.currencyCode||"USD",a=t.quantityAvailable;E(e,"upsell-price",w(r,s)),E(e,"upsell-stock-count",a.toString());let l=e.querySelector('[data-field="upsell-stock"]');l&&(a>0&&a<=5?l.classList.remove("hide"):l.classList.add("hide")),a<=0?e.classList.add("sold-out"):e.classList.remove("sold-out")}setupUpsellControls(e,t,r){let s=Number(r.price?.amount||"0"),a=r.quantityAvailable,l=Math.min(10,a),d=`upsell_${r.id.split("/").pop()}`,i=this.getVariantOptionText(r),p=`${t} - ${i}`,o=e.querySelector('[data-field="upsell-add"]'),c=e.querySelector('[data-field="upsell-qty-up"]'),u=e.querySelector('[data-field="upsell-qty-down"]'),m=1;if(E(e,"upsell-qty-count",m.toString()),o){let T=o.cloneNode(!0);o.parentNode?.replaceChild(T,o)}if(c){let T=c.cloneNode(!0);c.parentNode?.replaceChild(T,c)}if(u){let T=u.cloneNode(!0);u.parentNode?.replaceChild(T,u)}let h=e.querySelector('[data-field="upsell-add"]'),f=e.querySelector('[data-field="upsell-qty-up"]'),y=e.querySelector('[data-field="upsell-qty-down"]');if(a<=0){this.disableUpsellControls(e);return}h?.classList.remove("disabled");let A=h?.querySelector(".button-text");A&&(A.textContent="Add to Cart"),f?.addEventListener("click",()=>{m<l&&(m++,E(e,"upsell-qty-count",m.toString()))}),y?.addEventListener("click",()=>{m>1&&(m--,E(e,"upsell-qty-count",m.toString()))});let L=U(()=>{this.addUpsellToCart(d,p,s,m,r)},300);h?.addEventListener("click",()=>{h.classList.contains("disabled")||(h.classList.add("processing"),L(),setTimeout(()=>{h.classList.remove("processing")},350))})}disableUpsellControls(e){let t=e.querySelector('[data-field="upsell-add"]'),r=e.querySelector('[data-field="upsell-qty-wrap"]');if(t){let s=t.querySelector(".button-text");s&&(s.textContent="Out of Stock"),t.classList.add("disabled")}r&&(r.style.opacity="0.5")}addUpsellToCart(e,t,r,s,a){let i=this.cartManager.getItems().find(c=>c.id===e)?.quantity||0;if(i+s>a.quantityAvailable){let c=a.quantityAvailable-i;if(c<=0){S(`${t}: This item is already at maximum quantity in your cart.`);return}S(`${t}: Only ${c} more available. ${a.quantityAvailable} total in stock.`);return}this.cartManager.addUpsellItem({id:e,title:t,variant:"",price:r*s,quantity:s,variantId:a.id})&&console.log(`Added ${s}x ${t} to cart`)}};window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{fe();let n=Array.from(document.querySelectorAll('[ll-selector="accordion"]'));n.length>0?Ee(n):console.log("No accordion elements found.");let e=document.querySelector("#event-meta"),t=e?.getAttribute("data-handle")||void 0,r=e?.getAttribute("data-id")||void 0,s=location.pathname.split("/").filter(Boolean).pop(),a=t||s||"",l=await ue(a);if(a&&(console.log("[events] Fetching by handle:",a),l=await ue(a)),!l&&r){console.log("[events] Handle failed, trying CMS ID:",r);try{l=await Ve(r),l?console.log("[events] Successfully fetched by ID:",l.title):console.log("[events] No product found for ID:",r)}catch(T){console.error("[events] Failed to fetch by ID:",T)}}if(!l){Et(),console.error("[events] No product found for handle:",a,"or ID:",r),S("Event not found.");return}console.log("[events] Loaded product:",l);let d=l.startTime?.value?new Date(l.startTime.value):null;if(d?d<new Date:!1){de(l),gt();return}if((l.variants?.edges?.map(T=>T.node)||[]).reduce((T,$e)=>T+($e.quantityAvailable||0),0)<=0){de(l),vt();return}let u=document.querySelector('[data-role="cart"]'),m=new _,h=new N(m,u);m.onUpdateCallback=()=>{let T=l.variants?.edges?.[0]?.node?.price?.currencyCode||"USD";h.update(T)};let f=new P(l),y=new F(l,m),A=new $(l,m),L=new V(l,m,f,()=>y.getChosenVariantId());de(l),await y.render(),await A.render(),L.setupFormHandler()});function de(n){let e=n.startTime?.value?new Date(n.startTime.value):null;e&&(E(document,"date",pe(e)),E(document,"time",he(e))),E(document,"gameType",n.gameType?.value||""),E(document,"format",n.format?.value||""),E(document,"duration",n.duration?.value?`${Number(n.duration.value)} MINS`:"")}function gt(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0),Fe(),E(document,"seats","Event Completed")}function Et(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0),document.querySelector(".event_content_wrapper")?.childNodes?.forEach((r,s)=>{s>3&&r instanceof HTMLElement&&(r.classList.add("hide"),r.setAttribute("aria-hidden","true"))});let t=document.querySelector('[data-role="cart"]');t&&(t.classList.add("hide"),t.setAttribute("aria-hidden","true"))}function vt(){let n=document.querySelector('[data-role="submit"]');n&&(n.disabled=!0,n.classList.add("disabled"),n.textContent="Sold Out");let e=document.querySelector(".event_content_passed");if(e){e.classList.remove("w-condition-invisible");let t=e.querySelector(".heading-style-h4");t&&(t.textContent="This event is sold out")}Fe(),E(document,"seats","Sold Out")}function Fe(){let n=document.querySelector(".event_content_form");n&&(n.classList.add("hide"),n.setAttribute("aria-hidden","true"));let e=document.querySelectorAll('[data-role="ticket"]');e&&e.forEach(r=>{r.classList.add("sold-out")});let t=document.querySelector(".event_content_upsell");t&&(t.classList.add("hide"),t.setAttribute("aria-hidden","true"))}})();
